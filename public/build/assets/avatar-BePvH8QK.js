import{r as u,j as d,c as S}from"./app-BzdYNmvy.js";import{d as y}from"./index-C5fkU8yh.js";import{b as g}from"./index-Dbz286r4.js";import{P as A}from"./index-BfKWEIHH.js";import{s as $}from"./index-BZFKEexj.js";import{a as L}from"./utils-C9NPyLOx.js";function P(a,e=[]){let r=[];function s(t,c){const o=u.createContext(c);o.displayName=t+"Context";const i=r.length;r=[...r,c];const l=f=>{const{scope:v,children:x,...p}=f,I=v?.[a]?.[i]||o,R=u.useMemo(()=>p,Object.values(p));return d.jsx(I.Provider,{value:R,children:x})};l.displayName=t+"Provider";function m(f,v){const x=v?.[a]?.[i]||o,p=u.useContext(x);if(p)return p;if(c!==void 0)return c;throw new Error(`\`${f}\` must be used within \`${t}\``)}return[l,m]}const n=()=>{const t=r.map(c=>u.createContext(c));return function(o){const i=o?.[a]||t;return u.useMemo(()=>({[`__scope${a}`]:{...o,[a]:i}}),[o,i])}};return n.scopeName=a,[s,k(n,...e)]}function k(...a){const e=a[0];if(a.length===1)return e;const r=()=>{const s=a.map(n=>({useScope:n(),scopeName:n.scopeName}));return function(t){const c=s.reduce((o,{useScope:i,scopeName:l})=>{const f=i(t)[`__scope${l}`];return{...o,...f}},{});return u.useMemo(()=>({[`__scope${e.scopeName}`]:c}),[c])}};return r.scopeName=e.scopeName,r}function M(){return $.useSyncExternalStore(F,()=>!0,()=>!1)}function F(){return()=>{}}var C="Avatar",[z]=P(C),[H,E]=z(C),b=u.forwardRef((a,e)=>{const{__scopeAvatar:r,...s}=a,[n,t]=u.useState("idle");return d.jsx(H,{scope:r,imageLoadingStatus:n,onImageLoadingStatusChange:t,children:d.jsx(A.span,{...s,ref:e})})});b.displayName=C;var _="AvatarImage",w=u.forwardRef((a,e)=>{const{__scopeAvatar:r,src:s,onLoadingStatusChange:n=()=>{},...t}=a,c=E(_,r),o=T(s,t),i=y(l=>{n(l),c.onImageLoadingStatusChange(l)});return g(()=>{o!=="idle"&&i(o)},[o,i]),o==="loaded"?d.jsx(A.img,{...t,ref:e,src:s}):null});w.displayName=_;var N="AvatarFallback",j=u.forwardRef((a,e)=>{const{__scopeAvatar:r,delayMs:s,...n}=a,t=E(N,r),[c,o]=u.useState(s===void 0);return u.useEffect(()=>{if(s!==void 0){const i=window.setTimeout(()=>o(!0),s);return()=>window.clearTimeout(i)}},[s]),c&&t.imageLoadingStatus!=="loaded"?d.jsx(A.span,{...n,ref:e}):null});j.displayName=N;function h(a,e){return a?e?(a.src!==e&&(a.src=e),a.complete&&a.naturalWidth>0?"loaded":"loading"):"error":"idle"}function T(a,{referrerPolicy:e,crossOrigin:r}){const s=M(),n=u.useRef(null),t=s?(n.current||(n.current=new window.Image),n.current):null,[c,o]=u.useState(()=>h(t,a));return g(()=>{o(h(t,a))},[t,a]),g(()=>{const i=f=>()=>{o(f)};if(!t)return;const l=i("loaded"),m=i("error");return t.addEventListener("load",l),t.addEventListener("error",m),e&&(t.referrerPolicy=e),typeof r=="string"&&(t.crossOrigin=r),()=>{t.removeEventListener("load",l),t.removeEventListener("error",m)}},[t,r,e]),c}var B=b,q=w,G=j;function Q(a){const e=S.c(8);let r,s;e[0]!==a?({className:r,...s}=a,e[0]=a,e[1]=r,e[2]=s):(r=e[1],s=e[2]);let n;e[3]!==r?(n=L("relative flex size-8 shrink-0 overflow-hidden rounded-full",r),e[3]=r,e[4]=n):n=e[4];let t;return e[5]!==s||e[6]!==n?(t=d.jsx(B,{"data-slot":"avatar",className:n,...s}),e[5]=s,e[6]=n,e[7]=t):t=e[7],t}function U(a){const e=S.c(8);let r,s;e[0]!==a?({className:r,...s}=a,e[0]=a,e[1]=r,e[2]=s):(r=e[1],s=e[2]);let n;e[3]!==r?(n=L("aspect-square size-full",r),e[3]=r,e[4]=n):n=e[4];let t;return e[5]!==s||e[6]!==n?(t=d.jsx(q,{"data-slot":"avatar-image",className:n,...s}),e[5]=s,e[6]=n,e[7]=t):t=e[7],t}function X(a){const e=S.c(8);let r,s;e[0]!==a?({className:r,...s}=a,e[0]=a,e[1]=r,e[2]=s):(r=e[1],s=e[2]);let n;e[3]!==r?(n=L("bg-muted flex size-full items-center justify-center rounded-full",r),e[3]=r,e[4]=n):n=e[4];let t;return e[5]!==s||e[6]!==n?(t=d.jsx(G,{"data-slot":"avatar-fallback",className:n,...s}),e[5]=s,e[6]=n,e[7]=t):t=e[7],t}export{Q as A,X as a,U as b};

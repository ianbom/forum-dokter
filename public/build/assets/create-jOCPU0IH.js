import{c as U,u as V,r as D,j as t,a as W,H as X}from"./app-B-l1Xpn9.js";import{i as Y,a as Z,b as ee,c as te,d as se,e as ie,u as re,E as ae}from"./index-VkbpyBbr.js";import{i as le}from"./index-DcFVEx5N.js";import{B as R}from"./button-DFHWZ1Xh.js";import{C as F}from"./card-DiESreeX.js";import{I as oe}from"./input-5bM_IIF8.js";import{A as ne}from"./app-layout-DsGp7MiY.js";import{CategoryTagInput as me}from"./CategoryTagInput-kmBHe48P.js";import{PostEditorToolbar as ce}from"./PostEditorToolbar-SoN80sM5.js";import{TiptapStyles as de}from"./TiptapStyles-CDBdaYQT.js";import{A as fe}from"./arrow-left-CZFTbl6y.js";import{L as ue}from"./loader-circle-DV_G0f_3.js";import{S as pe}from"./send-UsuVb3FV.js";/* empty css            */import"./index-65P8ixG5.js";import"./index-C7yKKq-w.js";import"./utils-T-nSdN8v.js";import"./index-D5_l5di9.js";import"./dropdown-menu-DiduwXIY.js";import"./index-BZGbaylb.js";import"./index-CaZq0GVh.js";import"./index-BlAyHWvq.js";import"./index-BoPUR0Ne.js";import"./file-text-kVZRM_6T.js";import"./plus-jJO6JJwj.js";import"./badge-BPQv1LDO.js";import"./types-aaaP6Hrz.js";import"./x-D9hAr4BO.js";import"./separator-CpVFBdWM.js";import"./index-QVf-yi77.js";import"./underline-CLm2Ic4n.js";import"./minus-b4lLzx7m.js";const xe=[{title:"Dashboard",href:"/dashboard"},{title:"Posts",href:"/posts"},{title:"Buat Diskusi",href:"#"}];function We(){const e=U.c(58),{categories:H}=V().props,[r,G]=D.useState("");let N;e[0]===Symbol.for("react.memo_cache_sentinel")?(N=[],e[0]=N):N=e[0];const[a,q]=D.useState(N),[l,I]=D.useState(!1);let y;e[1]===Symbol.for("react.memo_cache_sentinel")?(y={},e[1]=y):y=e[1];const[s,_]=D.useState(y);let S;e[2]===Symbol.for("react.memo_cache_sentinel")?(S=Y.configure({heading:{levels:[1,2,3]}}),e[2]=S):S=e[2];let C;e[3]===Symbol.for("react.memo_cache_sentinel")?(C={extensions:[S,Z,ee.configure({multicolor:!1}),le.configure({types:["heading","paragraph"]}),te.configure({openOnClick:!1,HTMLAttributes:{class:"text-[#1548d7] dark:text-[#6b93f5] underline cursor-pointer"}}),se.configure({HTMLAttributes:{class:"rounded-lg max-w-full mx-auto my-4 shadow-sm"},allowBase64:!1}),ie.configure({placeholder:"Mulai tulis diskusi Anda di sini..."})],editorProps:{attributes:{class:"prose prose-neutral dark:prose-invert max-w-none min-h-[400px] px-6 py-4 focus:outline-none text-[15px] leading-[1.8]"}}},e[3]=C):C=e[3];const i=re(C);let E;e[4]!==i||e[5]!==a||e[6]!==r?(E=()=>{if(!i)return;const o=i.getHTML(),k={};if(r.trim()||(k.title="Judul wajib diisi."),a.length===0&&(k.categories="Minimal satu kategori wajib diisi."),(!o||o==="<p></p>")&&(k.content="Konten wajib diisi."),Object.keys(k).length>0){_(k);return}_({}),I(!0),W.post("/posts",{title:r.trim(),categories:a,content:o},{onError:Q=>{_(Q),I(!1)},onFinish:()=>I(!1)})},e[4]=i,e[5]=a,e[6]=r,e[7]=E):E=e[7];const z=E;let B;e[8]===Symbol.for("react.memo_cache_sentinel")?(B=t.jsx(X,{title:"Buat Diskusi Baru"}),e[8]=B):B=e[8];let $,A;e[9]===Symbol.for("react.memo_cache_sentinel")?($=t.jsx("div",{className:"absolute -top-20 -right-20 h-60 w-60 rounded-full bg-white/10 blur-2xl"}),A=t.jsx("div",{className:"absolute -bottom-16 -left-16 h-48 w-48 rounded-full bg-white/10 blur-2xl"}),e[9]=$,e[10]=A):($=e[9],A=e[10]);let T;e[11]===Symbol.for("react.memo_cache_sentinel")?(T=t.jsxs("div",{className:"relative overflow-hidden rounded-2xl bg-linear-to-br from-[#1548d7] via-[#1d5aef] to-[#3b6ef5] p-6 md:p-8 text-white shadow-xl",children:[$,A,t.jsxs("div",{className:"relative z-10",children:[t.jsx(R,{variant:"ghost",size:"sm",className:"mb-4 text-white/70 hover:text-white hover:bg-white/10",asChild:!0,children:t.jsxs("a",{href:"/posts",children:[t.jsx(fe,{className:"mr-1.5 h-4 w-4"}),"Kembali ke Diskusi"]})}),t.jsx("h1",{className:"text-xl md:text-2xl font-bold text-white",children:"Buat Diskusi Baru"}),t.jsx("p",{className:"text-sm text-white/60 mt-1",children:"Bagikan pengetahuan dan pengalaman klinis Anda dengan rekan sejawat"})]})]}),e[11]=T):T=e[11];let n;e[12]!==s.title?(n=o=>{G(o.target.value),s.title&&_(ge)},e[12]=s.title,e[13]=n):n=e[13];const J=`border-0 bg-transparent text-xl md:text-2xl font-bold placeholder:text-muted-foreground/40 focus-visible:ring-0 shadow-none px-0 h-auto py-2 ${s.title?"ring-1 ring-destructive rounded-md px-3":""}`;let m;e[14]!==J||e[15]!==n||e[16]!==r?(m=t.jsx(oe,{placeholder:"Judul diskusi...",value:r,onChange:n,className:J}),e[14]=J,e[15]=n,e[16]=r,e[17]=m):m=e[17];let c;e[18]!==s.title?(c=s.title&&t.jsx("p",{className:"text-xs text-destructive mt-1",children:s.title}),e[18]=s.title,e[19]=c):c=e[19];let d;e[20]!==m||e[21]!==c?(d=t.jsxs("div",{children:[m,c]}),e[20]=m,e[21]=c,e[22]=d):d=e[22];let f;e[23]!==s.categories?(f=o=>{q(o),s.categories&&_(he)},e[23]=s.categories,e[24]=f):f=e[24];let u;e[25]!==H||e[26]!==s.categories||e[27]!==a||e[28]!==f?(u=t.jsx("div",{children:t.jsx(me,{value:a,onChange:f,suggestions:H,error:s.categories})}),e[25]=H,e[26]=s.categories,e[27]=a,e[28]=f,e[29]=u):u=e[29];let p;e[30]!==d||e[31]!==u?(p=t.jsxs(F,{className:"p-5 md:p-6 space-y-4",children:[d,u]}),e[30]=d,e[31]=u,e[32]=p):p=e[32];const K=`border-1 shadow-sm overflow-hidden ${s.content?"ring-1 ring-destructive":""}`;let x,h;e[33]!==i?(x=t.jsx(ce,{editor:i}),h=t.jsx(ae,{editor:i}),e[33]=i,e[34]=x,e[35]=h):(x=e[34],h=e[35]);let g;e[36]!==s.content?(g=s.content&&t.jsx("div",{className:"px-5 pb-3",children:t.jsx("p",{className:"text-xs text-destructive",children:s.content})}),e[36]=s.content,e[37]=g):g=e[37];let b;e[38]!==K||e[39]!==x||e[40]!==h||e[41]!==g?(b=t.jsxs("div",{className:K,children:[x,h,g]}),e[38]=K,e[39]=x,e[40]=h,e[41]=g,e[42]=b):b=e[42];let L;e[43]===Symbol.for("react.memo_cache_sentinel")?(L=t.jsx("p",{className:"text-xs text-muted-foreground",children:"Tips: Gunakan toolbar di atas untuk memformat teks, menambahkan gambar, link, dan lainnya."}),e[43]=L):L=e[43];let j;e[44]!==l?(j=l?t.jsx(ue,{className:"mr-2 h-4 w-4 animate-spin"}):t.jsx(pe,{className:"mr-2 h-4 w-4"}),e[44]=l,e[45]=j):j=e[45];const O=l?"Mengirim...":"Publikasikan";let w;e[46]!==z||e[47]!==l||e[48]!==j||e[49]!==O?(w=t.jsxs(F,{className:"p-4 flex items-center justify-between",children:[L,t.jsxs(R,{className:"bg-[#1548d7] hover:bg-[#1237b0] text-white shadow-md",onClick:z,disabled:l,children:[j,O]})]}),e[46]=z,e[47]=l,e[48]=j,e[49]=O,e[50]=w):w=e[50];let v;e[51]!==p||e[52]!==b||e[53]!==w?(v=t.jsxs("div",{className:"flex flex-col gap-6 p-4 md:p-6",children:[T,t.jsxs("div",{className:"mx-auto w-full max-w-4xl flex flex-col gap-5",children:[p,b,w]})]}),e[51]=p,e[52]=b,e[53]=w,e[54]=v):v=e[54];let M;e[55]===Symbol.for("react.memo_cache_sentinel")?(M=t.jsx(de,{}),e[55]=M):M=e[55];let P;return e[56]!==v?(P=t.jsxs(ne,{breadcrumbs:xe,children:[B,v,M]}),e[56]=v,e[57]=P):P=e[57],P}function he(e){return{...e,categories:""}}function ge(e){return{...e,title:""}}export{We as default};

import{c as G,r as x,j as r}from"./app-dCVrG_mc.js";import{B as J}from"./badge-CiYItFyo.js";import{g as M}from"./types-ckcLsDsj.js";import{P as O}from"./plus-CmuzIzVP.js";import{X as Q}from"./x-LV5hcHsS.js";/* empty css            */import"./utils-Bg6-j3io.js";import"./index-io9CtjKe.js";function oe(F){const e=G.c(46),{value:o,onChange:c,suggestions:B,error:h}=F,H=B===void 0?[]:B,[s,z]=x.useState(""),[X,b]=x.useState(!1),L=x.useRef(null),R=x.useRef(null);let w;e[0]!==c||e[1]!==o?(w=t=>{const n=t.toLowerCase().trim();!n||o.includes(n)||o.length>=5||(c([...o,n]),z(""),b(!1))},e[0]=c,e[1]=o,e[2]=w):w=e[2];const i=w;let v;e[3]!==c||e[4]!==o?(v=t=>{c(o.filter(n=>n!==t))},e[3]=c,e[4]=o,e[5]=v):v=e[5];const a=v;let y;e[6]!==i||e[7]!==s||e[8]!==a||e[9]!==o?(y=t=>{(t.key==="Enter"||t.key===",")&&s.trim()&&(t.preventDefault(),i(s)),t.key==="Backspace"&&!s&&o.length>0&&a(o[o.length-1])},e[6]=i,e[7]=s,e[8]=a,e[9]=o,e[10]=y):y=e[10];const $=y;let j;e[11]!==s||e[12]!==o?(j=t=>t.name.toLowerCase().includes(s.toLowerCase())&&!o.includes(t.name.toLowerCase()),e[11]=s,e[12]=o,e[13]=j):j=e[13];const I=H.filter(j);let k,N;e[14]===Symbol.for("react.memo_cache_sentinel")?(k=()=>{const t=n=>{R.current&&!R.current.contains(n.target)&&b(!1)};return document.addEventListener("mousedown",t),()=>document.removeEventListener("mousedown",t)},N=[],e[14]=k,e[15]=N):(k=e[14],N=e[15]),x.useEffect(k,N);const l=o.length>=5,q="relative",D=`flex flex-wrap items-center gap-1.5 rounded-md border bg-background px-3 py-2 text-sm transition-colors focus-within:ring-2 focus-within:ring-ring focus-within:ring-offset-2 ${h?"ring-1 ring-destructive":"border-input"} ${l?"bg-muted/30 cursor-not-allowed":""}`;let u;e[16]!==l?(u=()=>{l||L.current?.focus()},e[16]=l,e[17]=u):u=e[17];let m;if(e[18]!==a||e[19]!==o){let t;e[21]!==a?(t=n=>{const T=M(n);return r.jsxs(J,{className:`${T.bg} ${T.text} border-0 text-[11px] font-medium gap-1 py-0.5 pr-1 cursor-default`,children:[r.jsx("span",{className:`h-1.5 w-1.5 rounded-full ${T.dot}`}),n,r.jsx("button",{type:"button",onClick:A=>{A.stopPropagation(),a(n)},className:"ml-0.5 rounded-full p-0.5 hover:bg-foreground/10 transition-colors",children:r.jsx(Q,{className:"h-3 w-3"})})]},n)},e[21]=a,e[22]=t):t=e[22],m=o.map(t),e[18]=a,e[19]=o,e[20]=m}else m=e[20];let C;e[23]===Symbol.for("react.memo_cache_sentinel")?(C=t=>{z(t.target.value),b(!0)},e[23]=C):C=e[23];let E;e[24]===Symbol.for("react.memo_cache_sentinel")?(E=()=>b(!0),e[24]=E):E=e[24];const K=l?"Maksimal 5 kategori":o.length===0?"Ketik kategori, tekan Enter / tap +":"Tambah...";let d;e[25]!==$||e[26]!==s||e[27]!==l||e[28]!==K?(d=r.jsx("input",{ref:L,type:"text",value:s,onChange:C,onKeyDown:$,onFocus:E,disabled:l,placeholder:K,className:"flex-1 min-w-[80px] bg-transparent outline-none placeholder:text-muted-foreground/50 text-sm disabled:cursor-not-allowed",enterKeyHint:"enter"}),e[25]=$,e[26]=s,e[27]=l,e[28]=K,e[29]=d):d=e[29];let f;e[30]!==i||e[31]!==s||e[32]!==l?(f=!l&&s.trim()&&r.jsx("button",{type:"button",onClick:t=>{t.stopPropagation(),i(s),L.current?.focus()},className:"ml-auto rounded-md p-1 bg-primary/10 text-primary hover:bg-primary/20 transition-colors",children:r.jsx(O,{className:"h-3.5 w-3.5"})}),e[30]=i,e[31]=s,e[32]=l,e[33]=f):f=e[33];let p;e[34]!==u||e[35]!==m||e[36]!==d||e[37]!==f||e[38]!==D?(p=r.jsxs("div",{className:D,onClick:u,children:[m,d,f]}),e[34]=u,e[35]=m,e[36]=d,e[37]=f,e[38]=D,e[39]=p):p=e[39];const P=X&&s.length>0&&I.length>0&&r.jsx("div",{className:"absolute z-50 mt-1 w-full rounded-md border bg-popover shadow-md max-h-48 overflow-y-auto",children:I.slice(0,8).map(t=>r.jsxs("button",{type:"button",className:"flex w-full items-center gap-2 px-3 py-2 text-sm hover:bg-accent transition-colors text-left",onMouseDown:n=>{n.preventDefault(),i(t.name)},children:[r.jsx("span",{className:`h-1.5 w-1.5 rounded-full ${M(t.name).dot}`}),t.name]},t.id))});let g;e[40]!==h?(g=h&&r.jsx("p",{className:"text-xs text-destructive mt-1",children:h}),e[40]=h,e[41]=g):g=e[41];let S;return e[42]!==p||e[43]!==P||e[44]!==g?(S=r.jsxs("div",{ref:R,className:q,children:[p,P,g]}),e[42]=p,e[43]=P,e[44]=g,e[45]=S):S=e[45],S}export{oe as CategoryTagInput};

import{c as X,u as Y,r as z,j as t,a as Z,H as ee}from"./app-DFZA_hNK.js";import{i as te,a as se,b as ie,c as re,d as ae,e as oe,u as le,E as ne}from"./index-BFDaqUrn.js";import{i as me}from"./index-JDu8Xwyg.js";import{B as q}from"./button-Bs7S3xZz.js";import{C as Q}from"./card-CLvCus1V.js";import{I as de}from"./input-ejwaPxGp.js";import{A as ce}from"./app-layout-DXTmrFtd.js";import{CategoryTagInput as pe}from"./CategoryTagInput-BaV28KvP.js";import{PostEditorToolbar as ue}from"./PostEditorToolbar-CAANxeY-.js";import{TiptapStyles as fe}from"./TiptapStyles-C6LSDJl0.js";import{A as xe}from"./arrow-left-Suz-oibI.js";import{L as ge}from"./loader-circle-DAadlNag.js";import{S as be}from"./send-DnJ3028c.js";/* empty css            */import"./index-B2TLZx_V.js";import"./index-C7yKKq-w.js";import"./utils-CoIT5UQg.js";import"./index-CF-CyKb3.js";import"./dropdown-menu-WbL0qvkK.js";import"./index-Djk_u06R.js";import"./index-CJ1Ro1aG.js";import"./index-CtyHxWV0.js";import"./index-B8SbIPAF.js";import"./index-CCdO6OfG.js";import"./index-CnkK2io_.js";import"./file-text-Vpl3YmeG.js";import"./plus-TipJRCaP.js";import"./badge-CKu25cTD.js";import"./types-aaaP6Hrz.js";import"./x-Bfzl4KKo.js";import"./separator-DnxQwfVr.js";import"./index-uI_Q2F0i.js";import"./underline-CvsZiy0R.js";import"./minus-D-GCNYZu.js";const he=[{title:"Dashboard",href:"/dashboard"},{title:"Posts",href:"/posts"},{title:"Buat Diskusi",href:"#"}];function tt(){const e=X.c(61),{categories:J}=Y().props,[r,U]=z.useState("");let N;e[0]===Symbol.for("react.memo_cache_sentinel")?(N=[],e[0]=N):N=e[0];const[a,V]=z.useState(N),[o,K]=z.useState(!1);let y;e[1]===Symbol.for("react.memo_cache_sentinel")?(y={},e[1]=y):y=e[1];const[s,k]=z.useState(y);let S;e[2]===Symbol.for("react.memo_cache_sentinel")?(S=te.configure({heading:{levels:[1,2,3]}}),e[2]=S):S=e[2];let C;e[3]===Symbol.for("react.memo_cache_sentinel")?(C={extensions:[S,se,ie.configure({multicolor:!1}),me.configure({types:["heading","paragraph"]}),re.configure({openOnClick:!1,HTMLAttributes:{class:"text-[#1548d7] dark:text-[#6b93f5] underline cursor-pointer"}}),ae.configure({HTMLAttributes:{class:"rounded-lg max-w-full mx-auto my-4 shadow-sm"},allowBase64:!1}),oe.configure({placeholder:"Mulai tulis diskusi Anda di sini..."})],editorProps:{attributes:{class:"prose prose-neutral dark:prose-invert max-w-none min-h-[400px] px-6 py-4 focus:outline-none text-[15px] leading-[1.8]"}}},e[3]=C):C=e[3];const i=le(C);let E;e[4]!==i||e[5]!==a||e[6]!==r?(E=()=>{if(!i)return;const l=i.getHTML(),w={};if(r.trim()||(w.title="Judul wajib diisi."),a.length===0&&(w.categories="Minimal satu kategori wajib diisi."),(!l||l==="<p></p>")&&(w.content="Konten wajib diisi."),Object.keys(w).length>0){k(w);return}k({}),K(!0),Z.post("/posts",{title:r.trim(),categories:a,content:l},{onError:W=>{k(W),K(!1)},onFinish:()=>K(!1)})},e[4]=i,e[5]=a,e[6]=r,e[7]=E):E=e[7];const O=E;let B;e[8]===Symbol.for("react.memo_cache_sentinel")?(B=t.jsx(ee,{title:"Buat Diskusi Baru"}),e[8]=B):B=e[8];let $,A,T,L;e[9]===Symbol.for("react.memo_cache_sentinel")?($=t.jsx("div",{className:"pointer-events-none absolute inset-0 bg-[linear-gradient(to_right,#80808012_1px,transparent_1px),linear-gradient(to_bottom,#80808012_1px,transparent_1px)] bg-size-[24px_24px]"}),A=t.jsx("div",{className:"absolute -top-24 -left-24 h-64 w-64 bg-[#1548d7]/10 dark:bg-[#6b93f5]/10 rounded-full blur-3xl pointer-events-none"}),T=t.jsx("div",{className:"absolute top-1/2 right-0 -translate-y-1/2 h-48 w-48 bg-indigo-500/10 dark:bg-indigo-400/10 rounded-full blur-3xl pointer-events-none"}),L=t.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-px bg-linear-to-r from-transparent via-[#1548d7]/20 dark:via-[#6b93f5]/20 to-transparent"}),e[9]=$,e[10]=A,e[11]=T,e[12]=L):($=e[9],A=e[10],T=e[11],L=e[12]);let M;e[13]===Symbol.for("react.memo_cache_sentinel")?(M=t.jsx(q,{variant:"ghost",size:"sm",className:"mb-6 text-muted-foreground hover:text-foreground -ml-3 transition-colors",asChild:!0,children:t.jsxs("a",{href:"/posts",children:[t.jsx(xe,{className:"mr-1.5 h-4 w-4"}),"Kembali ke Diskusi"]})}),e[13]=M):M=e[13];let P;e[14]===Symbol.for("react.memo_cache_sentinel")?(P=t.jsxs("div",{className:"relative overflow-hidden border-b border-border/40 bg-background/80 backdrop-blur-lg",children:[$,A,T,L,t.jsxs("div",{className:"relative mx-auto w-full max-w-4xl px-4 md:px-6 pt-6 md:pt-8 pb-6",children:[M,t.jsxs("h1",{className:"text-2xl md:text-3xl font-bold text-foreground tracking-tight flex items-center gap-3",children:[t.jsx("span",{className:"h-2 w-2 rounded-full bg-[#1548d7] dark:bg-[#6b93f5] shadow-[0_0_10px_rgba(21,72,215,0.6)]"}),"Buat Diskusi Baru"]}),t.jsx("p",{className:"text-sm text-muted-foreground mt-2 md:ml-5",children:"Bagikan pengetahuan dan pengalaman klinis Anda dengan rekan sejawat."})]})]}),e[14]=P):P=e[14];let n;e[15]!==s.title?(n=l=>{U(l.target.value),s.title&&k(_e)},e[15]=s.title,e[16]=n):n=e[16];const R=`border-0 bg-transparent text-xl md:text-2xl font-bold placeholder:text-muted-foreground/40 focus-visible:ring-0 shadow-none px-0 h-auto py-2 ${s.title?"ring-1 ring-destructive rounded-md px-3":""}`;let m;e[17]!==n||e[18]!==R||e[19]!==r?(m=t.jsx(de,{placeholder:"Judul diskusi...",value:r,onChange:n,className:R}),e[17]=n,e[18]=R,e[19]=r,e[20]=m):m=e[20];let d;e[21]!==s.title?(d=s.title&&t.jsx("p",{className:"text-xs text-destructive mt-1",children:s.title}),e[21]=s.title,e[22]=d):d=e[22];let c;e[23]!==m||e[24]!==d?(c=t.jsxs("div",{children:[m,d]}),e[23]=m,e[24]=d,e[25]=c):c=e[25];let p;e[26]!==s.categories?(p=l=>{V(l),s.categories&&k(je)},e[26]=s.categories,e[27]=p):p=e[27];let u;e[28]!==J||e[29]!==s.categories||e[30]!==a||e[31]!==p?(u=t.jsx("div",{children:t.jsx(pe,{value:a,onChange:p,suggestions:J,error:s.categories})}),e[28]=J,e[29]=s.categories,e[30]=a,e[31]=p,e[32]=u):u=e[32];let f;e[33]!==c||e[34]!==u?(f=t.jsxs(Q,{className:"p-5 md:p-6 space-y-4",children:[c,u]}),e[33]=c,e[34]=u,e[35]=f):f=e[35];const F=`border-1 shadow-sm overflow-hidden ${s.content?"ring-1 ring-destructive":""}`;let x,g;e[36]!==i?(x=t.jsx(ue,{editor:i}),g=t.jsx(ne,{editor:i}),e[36]=i,e[37]=x,e[38]=g):(x=e[37],g=e[38]);let b;e[39]!==s.content?(b=s.content&&t.jsx("div",{className:"px-5 pb-3",children:t.jsx("p",{className:"text-xs text-destructive",children:s.content})}),e[39]=s.content,e[40]=b):b=e[40];let h;e[41]!==F||e[42]!==x||e[43]!==g||e[44]!==b?(h=t.jsxs("div",{className:F,children:[x,g,b]}),e[41]=F,e[42]=x,e[43]=g,e[44]=b,e[45]=h):h=e[45];let D;e[46]===Symbol.for("react.memo_cache_sentinel")?(D=t.jsx("p",{className:"text-xs text-muted-foreground",children:"Tips: Gunakan toolbar di atas untuk memformat teks, menambahkan gambar, link, dan lainnya."}),e[46]=D):D=e[46];let j;e[47]!==o?(j=o?t.jsx(ge,{className:"mr-2 h-4 w-4 animate-spin"}):t.jsx(be,{className:"mr-2 h-4 w-4"}),e[47]=o,e[48]=j):j=e[48];const G=o?"Mengirim...":"Publikasikan";let _;e[49]!==O||e[50]!==o||e[51]!==j||e[52]!==G?(_=t.jsxs(Q,{className:"p-4 flex items-center justify-between",children:[D,t.jsxs(q,{className:"bg-[#1548d7] hover:bg-[#1237b0] text-white shadow-md",onClick:O,disabled:o,children:[j,G]})]}),e[49]=O,e[50]=o,e[51]=j,e[52]=G,e[53]=_):_=e[53];let v;e[54]!==f||e[55]!==h||e[56]!==_?(v=t.jsxs("div",{className:"flex flex-col gap-0",children:[P,t.jsxs("div",{className:"mx-auto w-full max-w-4xl px-4 md:px-6 py-6 flex flex-col gap-5",children:[f,h,_]})]}),e[54]=f,e[55]=h,e[56]=_,e[57]=v):v=e[57];let H;e[58]===Symbol.for("react.memo_cache_sentinel")?(H=t.jsx(fe,{}),e[58]=H):H=e[58];let I;return e[59]!==v?(I=t.jsxs(ce,{breadcrumbs:he,children:[B,v,H]}),e[59]=v,e[60]=I):I=e[60],I}function je(e){return{...e,categories:""}}function _e(e){return{...e,title:""}}export{tt as default};

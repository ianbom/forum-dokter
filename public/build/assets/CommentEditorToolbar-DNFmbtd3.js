import{r as h,j as s,c as d}from"./app-DFZA_hNK.js";import{S as m}from"./separator-DnxQwfVr.js";import{B as k,I as p,U as v,S as j,H as A,a as b,b as N,L as w,c as C,Q as L,d as H,e as S}from"./underline-CvsZiy0R.js";import{L as y}from"./loader-circle-DAadlNag.js";/* empty css            */import"./index-uI_Q2F0i.js";import"./utils-CoIT5UQg.js";function i(e){const t=d.c(5),{onClick:l,isActive:a,title:r,children:o}=e,n=`inline-flex items-center justify-center rounded p-1 text-sm transition-colors ${(a===void 0?!1:a)?"bg-[#1548d7]/10 text-[#1548d7] dark:bg-[#1548d7]/20 dark:text-[#6b93f5]":"text-muted-foreground hover:bg-muted hover:text-foreground"}`;let c;return t[0]!==o||t[1]!==l||t[2]!==n||t[3]!==r?(c=s.jsx("button",{type:"button",onClick:l,title:r,className:n,children:o}),t[0]=o,t[1]=l,t[2]=n,t[3]=r,t[4]=c):c=t[4],c}function M({editor:e}){const t=h.useRef(null),[l,a]=h.useState(!1),r=h.useCallback(async u=>{const n=u.target.files?.[0];if(!n||!e)return;a(!0);const c=new FormData;c.append("image",n);try{const x=document.querySelector('meta[name="csrf-token"]')?.content??"",g=await fetch("/posts/upload-image",{method:"POST",headers:{"X-CSRF-TOKEN":x,Accept:"application/json"},body:c});if(!g.ok)return;const f=await g.json();f.url&&e.chain().focus().setImage({src:f.url}).run()}catch{console.error("Image upload failed")}finally{a(!1),t.current&&(t.current.value="")}},[e]),o=h.useCallback(()=>{if(!e)return;const u=e.getAttributes("link").href,n=window.prompt("Masukkan URL:",u);if(n!==null){if(n===""){e.chain().focus().extendMarkRange("link").unsetLink().run();return}e.chain().focus().extendMarkRange("link").setLink({href:n}).run()}},[e]);return e?s.jsxs("div",{className:"flex flex-wrap items-center gap-0.5 border-b bg-muted/20 dark:bg-muted/10 px-2 py-1.5",children:[s.jsx(i,{onClick:()=>e.chain().focus().toggleBold().run(),isActive:e.isActive("bold"),title:"Bold",children:s.jsx(k,{className:"h-3.5 w-3.5"})}),s.jsx(i,{onClick:()=>e.chain().focus().toggleItalic().run(),isActive:e.isActive("italic"),title:"Italic",children:s.jsx(p,{className:"h-3.5 w-3.5"})}),s.jsx(i,{onClick:()=>e.chain().focus().toggleUnderline().run(),isActive:e.isActive("underline"),title:"Underline",children:s.jsx(v,{className:"h-3.5 w-3.5"})}),s.jsx(i,{onClick:()=>e.chain().focus().toggleStrike().run(),isActive:e.isActive("strike"),title:"Strikethrough",children:s.jsx(j,{className:"h-3.5 w-3.5"})}),s.jsx(i,{onClick:()=>e.chain().focus().toggleHighlight().run(),isActive:e.isActive("highlight"),title:"Highlight",children:s.jsx(A,{className:"h-3.5 w-3.5"})}),s.jsx(m,{orientation:"vertical",className:"mx-1 h-5"}),s.jsx(i,{onClick:()=>e.chain().focus().toggleHeading({level:2}).run(),isActive:e.isActive("heading",{level:2}),title:"Heading 2",children:s.jsx(b,{className:"h-3.5 w-3.5"})}),s.jsx(i,{onClick:()=>e.chain().focus().toggleHeading({level:3}).run(),isActive:e.isActive("heading",{level:3}),title:"Heading 3",children:s.jsx(N,{className:"h-3.5 w-3.5"})}),s.jsx(m,{orientation:"vertical",className:"mx-1 h-5"}),s.jsx(i,{onClick:()=>e.chain().focus().toggleBulletList().run(),isActive:e.isActive("bulletList"),title:"Bullet List",children:s.jsx(w,{className:"h-3.5 w-3.5"})}),s.jsx(i,{onClick:()=>e.chain().focus().toggleOrderedList().run(),isActive:e.isActive("orderedList"),title:"Ordered List",children:s.jsx(C,{className:"h-3.5 w-3.5"})}),s.jsx(i,{onClick:()=>e.chain().focus().toggleBlockquote().run(),isActive:e.isActive("blockquote"),title:"Blockquote",children:s.jsx(L,{className:"h-3.5 w-3.5"})}),s.jsx(m,{orientation:"vertical",className:"mx-1 h-5"}),s.jsx(i,{onClick:o,isActive:e.isActive("link"),title:"Link",children:s.jsx(H,{className:"h-3.5 w-3.5"})}),s.jsx(i,{onClick:()=>t.current?.click(),title:"Upload Gambar",children:l?s.jsx(y,{className:"h-3.5 w-3.5 animate-spin"}):s.jsx(S,{className:"h-3.5 w-3.5"})}),s.jsx("input",{ref:t,type:"file",accept:"image/*",className:"hidden",onChange:r})]}):null}export{M as CommentEditorToolbar};

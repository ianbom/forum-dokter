import{c as Z,u as ee,r as K,j as t,a as te,H as se}from"./app-dCVrG_mc.js";import{i as ie,a as re,b as ae,c as oe,d as le,e as ne,u as me,E as ce}from"./index-DxEXjwCK.js";import{i as de}from"./index-Ddg6AYTK.js";import{B as q}from"./button-C3Qb9PzC.js";import{C as Q}from"./card-CKMJNTCX.js";import{I as pe}from"./input-r_jZFIwI.js";import{A as ue}from"./app-layout-B0qM3CRQ.js";import{CategoryTagInput as fe}from"./CategoryTagInput-Bna2repq.js";import{PostEditorToolbar as xe}from"./PostEditorToolbar-BqJ23x8z.js";import{TiptapStyles as ge}from"./TiptapStyles-B0NJKgam.js";import{A as he}from"./arrow-left-DFKeXyh4.js";import{L as be}from"./loader-circle-VFFUnhu1.js";import{c as _e}from"./utils-Bg6-j3io.js";/* empty css            */import"./index-V5mRvGLs.js";import"./index-C7yKKq-w.js";import"./index-io9CtjKe.js";import"./dropdown-menu-C1G0hESQ.js";import"./index-Jf__gGK3.js";import"./index--Jxe4Fkd.js";import"./index-DLSkT_Er.js";import"./index-CrBxr1PY.js";import"./index-MqPAUplX.js";import"./index-AnDSScuS.js";import"./app-logo-icon-CJAw2EBB.js";import"./file-text-BpWpBjbu.js";import"./plus-CmuzIzVP.js";import"./badge-CiYItFyo.js";import"./types-ckcLsDsj.js";import"./x-LV5hcHsS.js";import"./separator-Bj4cs_4m.js";import"./index-CsAEF18M.js";import"./underline-BB8TqVVE.js";import"./minus-DeRAZsnw.js";const je=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],ve=_e("Save",je);function at(){const e=Z.c(63),{post:i,categories:O}=ee().props,[a,U]=K.useState(i.title);let w;e[0]!==i.categories?(w=i.categories.map(we),e[0]=i.categories,e[1]=w):w=e[1];const[o,W]=K.useState(w),[l,R]=K.useState(!1);let N;e[2]===Symbol.for("react.memo_cache_sentinel")?(N={},e[2]=N):N=e[2];const[s,k]=K.useState(N);let S;e[3]===Symbol.for("react.memo_cache_sentinel")?(S=[{title:"Dashboard",href:"/dashboard"},{title:"Posts",href:"/posts"},{title:"Edit Diskusi",href:"#"}],e[3]=S):S=e[3];const X=S;let C;e[4]===Symbol.for("react.memo_cache_sentinel")?(C=ie.configure({heading:{levels:[1,2,3]}}),e[4]=C):C=e[4];let E;e[5]===Symbol.for("react.memo_cache_sentinel")?(E=[C,re,ae.configure({multicolor:!1}),de.configure({types:["heading","paragraph"]}),oe.configure({openOnClick:!1,HTMLAttributes:{class:"text-[#1548d7] dark:text-[#6b93f5] underline cursor-pointer"}}),le.configure({HTMLAttributes:{class:"rounded-lg max-w-full mx-auto my-4 shadow-sm"},allowBase64:!1}),ne.configure({placeholder:"Mulai tulis diskusi Anda di sini..."})],e[5]=E):E=e[5];let L;e[6]===Symbol.for("react.memo_cache_sentinel")?(L={attributes:{class:"prose prose-neutral dark:prose-invert max-w-none min-h-[400px] px-6 py-4 focus:outline-none text-[15px] leading-[1.8]"}},e[6]=L):L=e[6];let M;e[7]!==i.content?(M={extensions:E,content:i.content,editorProps:L},e[7]=i.content,e[8]=M):M=e[8];const r=me(M);let $;e[9]!==r||e[10]!==i.id||e[11]!==o||e[12]!==a?($=()=>{if(!r)return;const n=r.getHTML(),y={};if(a.trim()||(y.title="Judul wajib diisi."),o.length===0&&(y.categories="Minimal satu kategori wajib diisi."),(!n||n==="<p></p>")&&(y.content="Konten wajib diisi."),Object.keys(y).length>0){k(y);return}k({}),R(!0),te.put(`/posts/${i.id}`,{title:a.trim(),categories:o,content:n},{onError:Y=>{k(Y),R(!1)},onFinish:()=>R(!1)})},e[9]=r,e[10]=i.id,e[11]=o,e[12]=a,e[13]=$):$=e[13];const V=$;let A;e[14]===Symbol.for("react.memo_cache_sentinel")?(A=t.jsx(se,{title:"Edit Diskusi"}),e[14]=A):A=e[14];let T,H,P,D;e[15]===Symbol.for("react.memo_cache_sentinel")?(D=t.jsx("div",{className:"pointer-events-none absolute inset-0 bg-[linear-gradient(to_right,#80808012_1px,transparent_1px),linear-gradient(to_bottom,#80808012_1px,transparent_1px)] bg-size-[24px_24px]"}),T=t.jsx("div",{className:"absolute -top-24 -left-24 h-64 w-64 bg-[#1548d7]/10 dark:bg-[#6b93f5]/10 rounded-full blur-3xl pointer-events-none"}),H=t.jsx("div",{className:"absolute top-1/2 right-0 -translate-y-1/2 h-48 w-48 bg-indigo-500/10 dark:bg-indigo-400/10 rounded-full blur-3xl pointer-events-none"}),P=t.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-px bg-linear-to-r from-transparent via-[#1548d7]/20 dark:via-[#6b93f5]/20 to-transparent"}),e[15]=T,e[16]=H,e[17]=P,e[18]=D):(T=e[15],H=e[16],P=e[17],D=e[18]);let I;e[19]===Symbol.for("react.memo_cache_sentinel")?(I=t.jsxs("div",{className:"relative overflow-hidden border-b border-border/40 bg-background/80 backdrop-blur-lg",children:[D,T,H,P,t.jsxs("div",{className:"relative mx-auto w-full max-w-4xl px-4 md:px-6 pt-6 md:pt-8 pb-6",children:[t.jsx(q,{variant:"ghost",size:"sm",className:"mb-6 text-muted-foreground hover:text-foreground -ml-3 transition-colors",asChild:!0,children:t.jsxs("a",{href:"/posts",children:[t.jsx(he,{className:"mr-1.5 h-4 w-4"}),"Kembali ke Diskusi"]})}),t.jsx("h1",{className:"text-2xl md:text-3xl font-bold text-foreground tracking-tight flex items-center gap-3",children:"Edit Diskusi"}),t.jsx("p",{className:"text-sm text-muted-foreground mt-2 md:ml-5",children:"Perbarui konten dan detail diskusi Anda."})]})]}),e[19]=I):I=e[19];let m;e[20]!==s.title?(m=n=>{U(n.target.value),s.title&&k(ye)},e[20]=s.title,e[21]=m):m=e[21];const F=`text-xl md:text-2xl font-bold placeholder:text-muted-foreground/40 h-auto py-3 px-4 bg-background ${s.title?"ring-1 ring-destructive border-destructive":""}`;let c;e[22]!==m||e[23]!==F||e[24]!==a?(c=t.jsx(pe,{placeholder:"Judul diskusi...",value:a,onChange:m,className:F}),e[22]=m,e[23]=F,e[24]=a,e[25]=c):c=e[25];let d;e[26]!==s.title?(d=s.title&&t.jsx("p",{className:"text-xs text-destructive mt-1",children:s.title}),e[26]=s.title,e[27]=d):d=e[27];let p;e[28]!==c||e[29]!==d?(p=t.jsxs("div",{children:[c,d]}),e[28]=c,e[29]=d,e[30]=p):p=e[30];let u;e[31]!==s.categories?(u=n=>{W(n),s.categories&&k(ke)},e[31]=s.categories,e[32]=u):u=e[32];let f;e[33]!==O||e[34]!==s.categories||e[35]!==o||e[36]!==u?(f=t.jsx("div",{children:t.jsx(fe,{value:o,onChange:u,suggestions:O,error:s.categories})}),e[33]=O,e[34]=s.categories,e[35]=o,e[36]=u,e[37]=f):f=e[37];let x;e[38]!==p||e[39]!==f?(x=t.jsxs(Q,{className:"p-5 md:p-6 space-y-4",children:[p,f]}),e[38]=p,e[39]=f,e[40]=x):x=e[40];let g,h;e[41]!==r?(g=t.jsx(xe,{editor:r}),h=t.jsx(ce,{editor:r}),e[41]=r,e[42]=g,e[43]=h):(g=e[42],h=e[43]);let b;e[44]!==s.content?(b=s.content&&t.jsx("div",{className:"px-5 pb-3",children:t.jsx("p",{className:"text-xs text-destructive",children:s.content})}),e[44]=s.content,e[45]=b):b=e[45];let z;e[46]===Symbol.for("react.memo_cache_sentinel")?(z=t.jsx("p",{className:"text-xs text-muted-foreground",children:"Tips: Gunakan toolbar di atas untuk memformat teks, menambahkan gambar, link, dan lainnya."}),e[46]=z):z=e[46];let _;e[47]!==l?(_=l?t.jsx(be,{className:"mr-2 h-4 w-4 animate-spin"}):t.jsx(ve,{className:"mr-2 h-4 w-4"}),e[47]=l,e[48]=_):_=e[48];const G=l?"Menyimpan...":"Simpan Perubahan";let j;e[49]!==V||e[50]!==l||e[51]!==_||e[52]!==G?(j=t.jsxs(Q,{className:"p-4 flex items-center justify-between",children:[z,t.jsxs(q,{className:"bg-[#1548d7] hover:bg-[#1237b0] text-white shadow-md",onClick:V,disabled:l,children:[_,G]})]}),e[49]=V,e[50]=l,e[51]=_,e[52]=G,e[53]=j):j=e[53];let v;e[54]!==x||e[55]!==g||e[56]!==h||e[57]!==b||e[58]!==j?(v=t.jsxs("div",{className:"flex flex-col gap-0",children:[I,t.jsxs("div",{className:"mx-auto w-full max-w-4xl px-4 md:px-6 py-6 flex flex-col gap-5",children:[x,g,h,b,j]})]}),e[54]=x,e[55]=g,e[56]=h,e[57]=b,e[58]=j,e[59]=v):v=e[59];let B;e[60]===Symbol.for("react.memo_cache_sentinel")?(B=t.jsx(ge,{}),e[60]=B):B=e[60];let J;return e[61]!==v?(J=t.jsxs(ue,{breadcrumbs:X,children:[A,v,B]}),e[61]=v,e[62]=J):J=e[62],J}function ke(e){return{...e,categories:""}}function ye(e){return{...e,title:""}}function we(e){return e.name.toLowerCase()}export{at as default};

import{c as q,r as d,j as r}from"./app-WXZgWYjV.js";import{B as A}from"./badge-Hq2Qighf.js";import{g as I}from"./types-aaaP6Hrz.js";import{X as G}from"./x-DRzYZgoh.js";/* empty css            */import"./utils-Bc5G1Fwi.js";import"./index-COVKz9xz.js";function Y(_){const e=q.c(38),{value:o,onChange:a,suggestions:T,error:f}=_,F=T===void 0?[]:T,[s,B]=d.useState(""),[M,p]=d.useState(!1),K=d.useRef(null),S=d.useRef(null);let g;e[0]!==a||e[1]!==o?(g=t=>{const n=t.toLowerCase().trim();!n||o.includes(n)||(a([...o,n]),B(""),p(!1))},e[0]=a,e[1]=o,e[2]=g):g=e[2];const x=g;let h;e[3]!==a||e[4]!==o?(h=t=>{a(o.filter(n=>n!==t))},e[3]=a,e[4]=o,e[5]=h):h=e[5];const l=h;let w;e[6]!==x||e[7]!==s||e[8]!==l||e[9]!==o?(w=t=>{(t.key==="Enter"||t.key===",")&&s.trim()&&(t.preventDefault(),x(s)),t.key==="Backspace"&&!s&&o.length>0&&l(o[o.length-1])},e[6]=x,e[7]=s,e[8]=l,e[9]=o,e[10]=w):w=e[10];const E=w;let b;e[11]!==s||e[12]!==o?(b=t=>t.name.toLowerCase().includes(s.toLowerCase())&&!o.includes(t.name.toLowerCase()),e[11]=s,e[12]=o,e[13]=b):b=e[13];const z=F.filter(b);let v,y;e[14]===Symbol.for("react.memo_cache_sentinel")?(v=()=>{const t=n=>{S.current&&!S.current.contains(n.target)&&p(!1)};return document.addEventListener("mousedown",t),()=>document.removeEventListener("mousedown",t)},y=[],e[14]=v,e[15]=y):(v=e[14],y=e[15]),d.useEffect(v,y);const P="relative",L=`flex flex-wrap items-center gap-1.5 rounded-md border bg-background px-3 py-2 text-sm transition-colors focus-within:ring-2 focus-within:ring-ring focus-within:ring-offset-2 ${f?"ring-1 ring-destructive":"border-input"}`;let j;e[16]===Symbol.for("react.memo_cache_sentinel")?(j=()=>K.current?.focus(),e[16]=j):j=e[16];let i;if(e[17]!==l||e[18]!==o){let t;e[20]!==l?(t=n=>{const D=I(n);return r.jsxs(A,{className:`${D.bg} ${D.text} border-0 text-[11px] font-medium gap-1 py-0.5 pr-1 cursor-default`,children:[r.jsx("span",{className:`h-1.5 w-1.5 rounded-full ${D.dot}`}),n,r.jsx("button",{type:"button",onClick:X=>{X.stopPropagation(),l(n)},className:"ml-0.5 rounded-full p-0.5 hover:bg-foreground/10 transition-colors",children:r.jsx(G,{className:"h-3 w-3"})})]},n)},e[20]=l,e[21]=t):t=e[21],i=o.map(t),e[17]=l,e[18]=o,e[19]=i}else i=e[19];let C;e[22]===Symbol.for("react.memo_cache_sentinel")?(C=t=>{B(t.target.value),p(!0)},e[22]=C):C=e[22];let N;e[23]===Symbol.for("react.memo_cache_sentinel")?(N=()=>p(!0),e[23]=N):N=e[23];const R=o.length===0?"Ketik kategori, tekan Enter...":"Tambah...";let c;e[24]!==E||e[25]!==s||e[26]!==R?(c=r.jsx("input",{ref:K,type:"text",value:s,onChange:C,onKeyDown:E,onFocus:N,placeholder:R,className:"flex-1 min-w-[120px] bg-transparent outline-none placeholder:text-muted-foreground/50 text-sm"}),e[24]=E,e[25]=s,e[26]=R,e[27]=c):c=e[27];let u;e[28]!==i||e[29]!==c||e[30]!==L?(u=r.jsxs("div",{className:L,onClick:j,children:[i,c]}),e[28]=i,e[29]=c,e[30]=L,e[31]=u):u=e[31];const $=M&&s.length>0&&z.length>0&&r.jsx("div",{className:"absolute z-50 mt-1 w-full rounded-md border bg-popover shadow-md max-h-48 overflow-y-auto",children:z.slice(0,8).map(t=>r.jsxs("button",{type:"button",className:"flex w-full items-center gap-2 px-3 py-2 text-sm hover:bg-accent transition-colors text-left",onMouseDown:n=>{n.preventDefault(),x(t.name)},children:[r.jsx("span",{className:`h-1.5 w-1.5 rounded-full ${I(t.name).dot}`}),t.name]},t.id))});let m;e[32]!==f?(m=f&&r.jsx("p",{className:"text-xs text-destructive mt-1",children:f}),e[32]=f,e[33]=m):m=e[33];let k;return e[34]!==u||e[35]!==$||e[36]!==m?(k=r.jsxs("div",{ref:S,className:P,children:[u,$,m]}),e[34]=u,e[35]=$,e[36]=m,e[37]=k):k=e[37],k}export{Y as CategoryTagInput};

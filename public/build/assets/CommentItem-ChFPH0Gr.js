import{c as Ee,r as K,j as t,a as je}from"./app-WXZgWYjV.js";import{i as De,b as Le,c as ze,d as Be,e as Ae,u as He,a as Re,E as we}from"./index-FgcIagk_.js";import{a as Ie,b as Oe,A as Fe}from"./avatar-CxRXVRCc.js";import{B as Pe}from"./badge-Hq2Qighf.js";import{B as h}from"./button-BK54Dx6v.js";import{D as qe,a as ke,b as Ue,c as Ke,d as Ze}from"./dropdown-menu-mj4_mJHC.js";import{AttachmentCard as Ge}from"./AttachmentCard-BLkY_i6d.js";import{CommentEditorToolbar as ye}from"./CommentEditorToolbar-PTl2DmQg.js";import{L as Se}from"./loader-circle-D_N9OmGN.js";import{P as $e,T as Je}from"./trash-2-Boq7vHwB.js";import{E as Qe}from"./ellipsis-Cpd_5B9n.js";import{c as ve}from"./utils-Bc5G1Fwi.js";import{S as Ve}from"./send-bK_FWyfC.js";const We=[["polyline",{points:"15 10 20 15 15 20",key:"1q7qjw"}],["path",{d:"M4 4v7a4 4 0 0 0 4 4h12",key:"z08zvw"}]],Xe=ve("CornerDownRight",We);const Ye=[["polyline",{points:"9 17 4 12 9 7",key:"hvgpf2"}],["path",{d:"M20 18v-2a4 4 0 0 0-4-4H4",key:"5vmcpk"}]],et=ve("Reply",Ye);const tt=[["path",{d:"M7 10v12",key:"1qc93n"}],["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2a3.13 3.13 0 0 1 3 3.88Z",key:"emmmcr"}]],st=ve("ThumbsUp",tt);function Ce(l){const e=Ee.c(11);let s;e[0]===Symbol.for("react.memo_cache_sentinel")?(s=De.configure({heading:{levels:[2,3]}}),e[0]=s):s=e[0];let r,u,f;e[1]===Symbol.for("react.memo_cache_sentinel")?(r=Le.configure({multicolor:!1}),u=ze.configure({openOnClick:!1,HTMLAttributes:{class:"text-[#1548d7] dark:text-[#6b93f5] underline cursor-pointer"}}),f=Be.configure({HTMLAttributes:{class:"rounded-lg max-w-full mx-auto my-3 shadow-sm"},allowBase64:!1}),e[1]=r,e[2]=u,e[3]=f):(r=e[1],u=e[2],f=e[3]);let i;e[4]!==l?(i=Ae.configure({placeholder:l}),e[4]=l,e[5]=i):i=e[5];let c;e[6]!==i?(c=[s,Re,r,u,f,i],e[6]=i,e[7]=c):c=e[7];let p;e[8]===Symbol.for("react.memo_cache_sentinel")?(p={attributes:{class:"prose prose-sm prose-neutral dark:prose-invert max-w-none min-h-[100px] px-4 py-3 focus:outline-none text-sm leading-relaxed"}},e[8]=p):p=e[8];let x;return e[9]!==c?(x={extensions:c,editorProps:p},e[9]=c,e[10]=x):x=e[10],He(x)}const n={bg:"bg-[#1548d7]",bgHover:"hover:bg-[#1237b0]",text:"text-[#1548d7]",bgLight:"bg-[#1548d7]/10",darkText:"dark:text-[#6b93f5]",darkBgLight:"dark:bg-[#1548d7]/20"};function at(l){return l.split(" ").filter((e,s)=>s<2).map(e=>e[0]).join("").toUpperCase()}function it(l){return new Date(l).toLocaleDateString("id-ID",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"})}function Te(l){const e=Ee.c(109),{comment:s,postId:r,depth:u}=l,f=u===void 0?0:u,[i,c]=K.useState(!1),[p,x]=K.useState(!1),[ne,le]=K.useState(!1),[Z,Ne]=K.useState(!1),[G,_e]=K.useState(!1),[g,Me]=K.useState(!1),o=f>0;let J;e[0]!==s.user.name?(J=at(s.user.name),e[0]=s.user.name,e[1]=J):J=e[1];const re=J,m=Ce(`Balas ${s.user.name}...`),a=Ce("Edit komentar...");let Q;e[2]!==s.id||e[3]!==r||e[4]!==m?(Q=()=>{if(!m)return;const d=m.getHTML();!d||d==="<p></p>"||(x(!0),je.post("/comments",{post_id:r,parent_id:s.id,content:d},{preserveScroll:!0,onSuccess:()=>{m.commands.clearContent(),c(!1)},onFinish:()=>x(!1)}))},e[2]=s.id,e[3]=r,e[4]=m,e[5]=Q):Q=e[5];const oe=Q;let V;e[6]!==s.content||e[7]!==a?.commands?(V=()=>{a?.commands.setContent(s.content),le(!0)},e[6]=s.content,e[7]=a?.commands,e[8]=V):V=e[8];const ce=V;let W;e[9]!==a?.commands?(W=()=>{le(!1),a?.commands.clearContent()},e[9]=a?.commands,e[10]=W):W=e[10];const me=W;let X;e[11]!==s.id||e[12]!==a?(X=()=>{if(!a)return;const d=a.getHTML();!d||d==="<p></p>"||(Ne(!0),je.put(`/comments/${s.id}`,{content:d},{preserveScroll:!0,onSuccess:()=>le(!1),onFinish:()=>Ne(!1)}))},e[11]=s.id,e[12]=a,e[13]=X):X=e[13];const de=X;let Y;e[14]!==s.id?(Y=()=>{confirm("Apakah Anda yakin ingin menghapus komentar ini?")&&(_e(!0),je.delete(`/comments/${s.id}`,{preserveScroll:!0,onFinish:()=>_e(!1)}))},e[14]=s.id,e[15]=Y):Y=e[15];const fe=Y,pe=o?"ml-5 md:ml-8":"";let b;e[16]!==o?(b=o&&t.jsx("div",{className:"absolute -left-5 md:-left-8 top-0 bottom-0 w-px bg-border dark:bg-border/50"}),e[16]=o,e[17]=b):b=e[17];let j;e[18]!==o?(j=o&&t.jsx("div",{className:"absolute -left-5 md:-left-8 top-9 h-px w-4 md:w-7 bg-border dark:bg-border/50"}),e[18]=o,e[19]=j):j=e[19];const ue=`${o?"h-8 w-8":"h-10 w-10"} shrink-0 ring-2 ring-background shadow-sm`;let v;e[20]!==s.user.name||e[21]!==s.user.profile_photo?(v=s.user.profile_photo&&t.jsx(Ie,{src:`/storage/${s.user.profile_photo}`,alt:s.user.name,className:"object-cover"}),e[20]=s.user.name,e[21]=s.user.profile_photo,e[22]=v):v=e[22];let N;e[23]!==re?(N=t.jsx(Oe,{className:`${n.bg} text-white text-xs font-semibold`,children:re}),e[23]=re,e[24]=N):N=e[24];let _;e[25]!==ue||e[26]!==v||e[27]!==N?(_=t.jsxs(Fe,{className:ue,children:[v,N]}),e[25]=ue,e[26]=v,e[27]=N,e[28]=_):_=e[28];let w;e[29]!==s.user.name?(w=t.jsx("span",{className:`text-sm font-semibold ${n.text} ${n.darkText}`,children:s.user.name}),e[29]=s.user.name,e[30]=w):w=e[30];let k;e[31]!==s.user.specialization?(k=s.user.specialization&&t.jsx(Pe,{className:`${n.bgLight} ${n.text} ${n.darkBgLight} ${n.darkText} border-0 text-[10px] font-medium px-1.5 py-0`,children:s.user.specialization}),e[31]=s.user.specialization,e[32]=k):k=e[32];let y;e[33]!==s.created_at?(y=it(s.created_at),e[33]=s.created_at,e[34]=y):y=e[34];let S;e[35]!==y?(S=t.jsx("span",{className:"text-[11px] text-muted-foreground",children:y}),e[35]=y,e[36]=S):S=e[36];let $;e[37]!==w||e[38]!==k||e[39]!==S?($=t.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[w,k,S]}),e[37]=w,e[38]=k,e[39]=S,e[40]=$):$=e[40];let ee;e[41]===Symbol.for("react.memo_cache_sentinel")?(ee=t.jsx(qe,{asChild:!0,children:t.jsx(h,{variant:"ghost",size:"icon",className:"h-7 w-7 shrink-0 opacity-0 group-hover:opacity-100 transition-opacity",children:t.jsx(Qe,{className:"h-3.5 w-3.5"})})}),e[41]=ee):ee=e[41];let te;e[42]===Symbol.for("react.memo_cache_sentinel")?(te=t.jsx($e,{className:"mr-2 h-4 w-4"}),e[42]=te):te=e[42];let C;e[43]!==ce?(C=t.jsxs(ke,{onClick:ce,children:[te,"Edit"]}),e[43]=ce,e[44]=C):C=e[44];let se;e[45]===Symbol.for("react.memo_cache_sentinel")?(se=t.jsx(Ue,{}),e[45]=se):se=e[45];let ae;e[46]===Symbol.for("react.memo_cache_sentinel")?(ae=t.jsx(Je,{className:"mr-2 h-4 w-4"}),e[46]=ae):ae=e[46];const xe=G?"Menghapus...":"Hapus";let E;e[47]!==G||e[48]!==fe||e[49]!==xe?(E=t.jsxs(ke,{className:"text-destructive focus:text-destructive",onClick:fe,disabled:G,children:[ae,xe]}),e[47]=G,e[48]=fe,e[49]=xe,e[50]=E):E=e[50];let T;e[51]!==C||e[52]!==E?(T=t.jsxs(Ke,{children:[ee,t.jsxs(Ze,{align:"end",className:"w-40",children:[C,se,E]})]}),e[51]=C,e[52]=E,e[53]=T):T=e[53];let M;e[54]!==$||e[55]!==T?(M=t.jsxs("div",{className:"flex items-center justify-between gap-2 mb-1.5",children:[$,T]}),e[54]=$,e[55]=T,e[56]=M):M=e[56];let D;e[57]!==s.content||e[58]!==a||e[59]!==ne||e[60]!==me||e[61]!==de||e[62]!==Z?(D=ne?t.jsxs("div",{className:"mt-2 space-y-2",children:[t.jsxs("div",{className:"rounded-xl border bg-card shadow-sm overflow-hidden",children:[t.jsx(ye,{editor:a}),t.jsx(we,{editor:a})]}),t.jsxs("div",{className:"flex items-center justify-end gap-1.5",children:[t.jsx(h,{variant:"ghost",size:"sm",className:"h-7 text-xs",onClick:me,children:"Batal"}),t.jsxs(h,{size:"sm",className:`h-7 text-xs ${n.bg} ${n.bgHover} text-white`,onClick:de,disabled:Z,children:[Z?t.jsx(Se,{className:"mr-1 h-3 w-3 animate-spin"}):t.jsx($e,{className:"mr-1 h-3 w-3"}),"Simpan"]})]})]}):t.jsx("div",{className:"prose prose-sm prose-neutral dark:prose-invert max-w-none text-sm leading-relaxed text-foreground/85",dangerouslySetInnerHTML:{__html:s.content}}),e[57]=s.content,e[58]=a,e[59]=ne,e[60]=me,e[61]=de,e[62]=Z,e[63]=D):D=e[63];let L;e[64]!==s.attachments?(L=s.attachments?.length>0&&t.jsx("div",{className:"mt-3 grid gap-2 sm:grid-cols-2",children:s.attachments.map(nt)}),e[64]=s.attachments,e[65]=L):L=e[65];let z;e[66]!==M||e[67]!==D||e[68]!==L?(z=t.jsxs("div",{className:"rounded-2xl rounded-tl-sm bg-muted/50 dark:bg-muted/30 px-4 py-3 transition-colors hover:bg-muted/70 dark:hover:bg-muted/40",children:[M,D,L]}),e[66]=M,e[67]=D,e[68]=L,e[69]=z):z=e[69];const he=`h-7 px-2 text-xs gap-1 ${g?`${n.text} ${n.darkText}`:"text-muted-foreground"}`;let B;e[70]!==g?(B=()=>Me(!g),e[70]=g,e[71]=B):B=e[71];const ge=`h-3.5 w-3.5 ${g?"fill-current":""}`;let A;e[72]!==ge?(A=t.jsx(st,{className:ge}),e[72]=ge,e[73]=A):A=e[73];const be=g?1:0;let H;e[74]!==he||e[75]!==B||e[76]!==A||e[77]!==be?(H=t.jsxs(h,{variant:"ghost",size:"sm",className:he,onClick:B,children:[A,be]}),e[74]=he,e[75]=B,e[76]=A,e[77]=be,e[78]=H):H=e[78];let R;e[79]!==o||e[80]!==i?(R=!o&&t.jsxs(h,{variant:"ghost",size:"sm",className:"h-7 px-2 text-xs text-muted-foreground gap-1",onClick:()=>c(!i),children:[t.jsx(et,{className:"h-3.5 w-3.5"}),"Balas"]}),e[79]=o,e[80]=i,e[81]=R):R=e[81];let I;e[82]!==H||e[83]!==R?(I=t.jsxs("div",{className:"mt-1.5 flex items-center gap-0.5 px-1",children:[H,R]}),e[82]=H,e[83]=R,e[84]=I):I=e[84];let O;e[85]!==oe||e[86]!==m||e[87]!==i||e[88]!==p?(O=i&&t.jsxs("div",{className:"mt-2 ml-1 flex gap-2.5 items-start",children:[t.jsx(Xe,{className:"mt-3 h-4 w-4 text-muted-foreground shrink-0"}),t.jsxs("div",{className:"flex-1 space-y-2",children:[t.jsxs("div",{className:"rounded-xl border bg-card shadow-sm overflow-hidden",children:[t.jsx(ye,{editor:m}),t.jsx(we,{editor:m})]}),t.jsxs("div",{className:"flex items-center justify-end gap-1.5",children:[t.jsx(h,{variant:"ghost",size:"sm",className:"h-7 text-xs",onClick:()=>{c(!1),m?.commands.clearContent()},children:"Batal"}),t.jsxs(h,{size:"sm",className:`h-7 text-xs ${n.bg} ${n.bgHover} text-white`,onClick:oe,disabled:p,children:[p?t.jsx(Se,{className:"mr-1 h-3 w-3 animate-spin"}):t.jsx(Ve,{className:"mr-1 h-3 w-3"}),"Kirim"]})]})]})]}),e[85]=oe,e[86]=m,e[87]=i,e[88]=p,e[89]=O):O=e[89];let F;e[90]!==z||e[91]!==I||e[92]!==O?(F=t.jsxs("div",{className:"flex-1 min-w-0",children:[z,I,O]}),e[90]=z,e[91]=I,e[92]=O,e[93]=F):F=e[93];let P;e[94]!==_||e[95]!==F?(P=t.jsxs("div",{className:"flex gap-3",children:[_,F]}),e[94]=_,e[95]=F,e[96]=P):P=e[96];let q;e[97]!==j||e[98]!==P||e[99]!==b?(q=t.jsxs("div",{className:"group relative py-5",children:[b,j,P]}),e[97]=j,e[98]=P,e[99]=b,e[100]=q):q=e[100];let U;e[101]!==s.replies||e[102]!==f||e[103]!==r?(U=s.replies?.map(d=>t.jsx(Te,{comment:d,postId:r,depth:f+1},d.id)),e[101]=s.replies,e[102]=f,e[103]=r,e[104]=U):U=e[104];let ie;return e[105]!==q||e[106]!==U||e[107]!==pe?(ie=t.jsxs("div",{className:pe,children:[q,U]}),e[105]=q,e[106]=U,e[107]=pe,e[108]=ie):ie=e[108],ie}function nt(l){return t.jsx(Ge,{attachment:l},l.id)}const jt=Object.freeze(Object.defineProperty({__proto__:null,CommentItem:Te},Symbol.toStringTag,{value:"Module"}));export{Te as C,st as T,jt as a,Ce as u};

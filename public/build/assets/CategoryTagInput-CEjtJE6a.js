import{c as q,r as g,j as r}from"./app-DxNMPl-L.js";import{B as A}from"./badge-BRUm1n93.js";import{g as I}from"./types-aaaP6Hrz.js";import{P as G}from"./plus-BVH5AOpR.js";import{X as J}from"./x-CUL9mwJm.js";/* empty css            */import"./utils-CwW6CK2s.js";import"./index-DlqAlQEu.js";function te(_){const e=q.c(42),{value:o,onChange:i,suggestions:T,error:p}=_,F=T===void 0?[]:T,[s,B]=g.useState(""),[H,x]=g.useState(!1),E=g.useRef(null),L=g.useRef(null);let h;e[0]!==i||e[1]!==o?(h=t=>{const n=t.toLowerCase().trim();!n||o.includes(n)||(i([...o,n]),B(""),x(!1))},e[0]=i,e[1]=o,e[2]=h):h=e[2];const a=h;let b;e[3]!==i||e[4]!==o?(b=t=>{i(o.filter(n=>n!==t))},e[3]=i,e[4]=o,e[5]=b):b=e[5];const l=b;let w;e[6]!==a||e[7]!==s||e[8]!==l||e[9]!==o?(w=t=>{(t.key==="Enter"||t.key===",")&&s.trim()&&(t.preventDefault(),a(s)),t.key==="Backspace"&&!s&&o.length>0&&l(o[o.length-1])},e[6]=a,e[7]=s,e[8]=l,e[9]=o,e[10]=w):w=e[10];const R=w;let y;e[11]!==s||e[12]!==o?(y=t=>t.name.toLowerCase().includes(s.toLowerCase())&&!o.includes(t.name.toLowerCase()),e[11]=s,e[12]=o,e[13]=y):y=e[13];const z=F.filter(y);let v,j;e[14]===Symbol.for("react.memo_cache_sentinel")?(v=()=>{const t=n=>{L.current&&!L.current.contains(n.target)&&x(!1)};return document.addEventListener("mousedown",t),()=>document.removeEventListener("mousedown",t)},j=[],e[14]=v,e[15]=j):(v=e[14],j=e[15]),g.useEffect(v,j);const M="relative",$=`flex flex-wrap items-center gap-1.5 rounded-md border bg-background px-3 py-2 text-sm transition-colors focus-within:ring-2 focus-within:ring-ring focus-within:ring-offset-2 ${p?"ring-1 ring-destructive":"border-input"}`;let N;e[16]===Symbol.for("react.memo_cache_sentinel")?(N=()=>E.current?.focus(),e[16]=N):N=e[16];let c;if(e[17]!==l||e[18]!==o){let t;e[20]!==l?(t=n=>{const P=I(n);return r.jsxs(A,{className:`${P.bg} ${P.text} border-0 text-[11px] font-medium gap-1 py-0.5 pr-1 cursor-default`,children:[r.jsx("span",{className:`h-1.5 w-1.5 rounded-full ${P.dot}`}),n,r.jsx("button",{type:"button",onClick:X=>{X.stopPropagation(),l(n)},className:"ml-0.5 rounded-full p-0.5 hover:bg-foreground/10 transition-colors",children:r.jsx(J,{className:"h-3 w-3"})})]},n)},e[20]=l,e[21]=t):t=e[21],c=o.map(t),e[17]=l,e[18]=o,e[19]=c}else c=e[19];let C;e[22]===Symbol.for("react.memo_cache_sentinel")?(C=t=>{B(t.target.value),x(!0)},e[22]=C):C=e[22];let k;e[23]===Symbol.for("react.memo_cache_sentinel")?(k=()=>x(!0),e[23]=k):k=e[23];const D=o.length===0?"Ketik kategori, tekan Enter / tap +":"Tambah...";let m;e[24]!==R||e[25]!==s||e[26]!==D?(m=r.jsx("input",{ref:E,type:"text",value:s,onChange:C,onKeyDown:R,onFocus:k,placeholder:D,className:"flex-1 min-w-[80px] bg-transparent outline-none placeholder:text-muted-foreground/50 text-sm",enterKeyHint:"enter"}),e[24]=R,e[25]=s,e[26]=D,e[27]=m):m=e[27];let u;e[28]!==a||e[29]!==s?(u=s.trim()&&r.jsx("button",{type:"button",onClick:t=>{t.stopPropagation(),a(s),E.current?.focus()},className:"ml-auto rounded-md p-1 bg-primary/10 text-primary hover:bg-primary/20 transition-colors",children:r.jsx(G,{className:"h-3.5 w-3.5"})}),e[28]=a,e[29]=s,e[30]=u):u=e[30];let f;e[31]!==c||e[32]!==m||e[33]!==u||e[34]!==$?(f=r.jsxs("div",{className:$,onClick:N,children:[c,m,u]}),e[31]=c,e[32]=m,e[33]=u,e[34]=$,e[35]=f):f=e[35];const K=H&&s.length>0&&z.length>0&&r.jsx("div",{className:"absolute z-50 mt-1 w-full rounded-md border bg-popover shadow-md max-h-48 overflow-y-auto",children:z.slice(0,8).map(t=>r.jsxs("button",{type:"button",className:"flex w-full items-center gap-2 px-3 py-2 text-sm hover:bg-accent transition-colors text-left",onMouseDown:n=>{n.preventDefault(),a(t.name)},children:[r.jsx("span",{className:`h-1.5 w-1.5 rounded-full ${I(t.name).dot}`}),t.name]},t.id))});let d;e[36]!==p?(d=p&&r.jsx("p",{className:"text-xs text-destructive mt-1",children:p}),e[36]=p,e[37]=d):d=e[37];let S;return e[38]!==f||e[39]!==K||e[40]!==d?(S=r.jsxs("div",{ref:L,className:M,children:[f,K,d]}),e[38]=f,e[39]=K,e[40]=d,e[41]=S):S=e[41],S}export{te as CategoryTagInput};

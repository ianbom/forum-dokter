import{c as ae,u as oe,r as G,j as t,a as le,H as ne}from"./app-C-L-f7Cv.js";import{i as me,a as ce,b as de,c as pe,d as fe,e as ue,u as xe,E as ge}from"./index-DLcPj4J-.js";import{i as be}from"./index-DIIjUR9G.js";import{B as Z}from"./button-C6VLO9-n.js";import{C as ee}from"./card-CaTQA3-E.js";import{I as he}from"./input-kfKQS2T6.js";import{A as _e}from"./app-layout-DymOOUoN.js";import{CategoryTagInput as je}from"./CategoryTagInput-_Zu-QqzQ.js";import{PostEditorToolbar as ve}from"./PostEditorToolbar-82_CvGxM.js";import{TiptapStyles as ke}from"./TiptapStyles-CcbPnpvA.js";import{A as ye}from"./arrow-left-Ctpm-IDd.js";import{L as we}from"./loader-circle-Dldf86kZ.js";import{c as Ne}from"./utils-BZan-CNl.js";import"./app-DLAxlG54.js";import"./index-O-Ox_5vd.js";import"./index-C7yKKq-w.js";import"./index-BqFw_WzI.js";import"./dropdown-menu-BdS-nXSh.js";import"./index-CyX7LRCO.js";import"./index-Cj9rIc1C.js";import"./index-DOXXiINL.js";import"./index-C-6T25Ox.js";import"./index-CzirVx36.js";import"./index-CbIikgPx.js";import"./app-logo-icon-DKoKFrJm.js";import"./file-text-DqdgOMSr.js";import"./plus-D6sgujCW.js";import"./badge-BmVfFTxy.js";import"./types-aaaP6Hrz.js";import"./x-Bt6brddw.js";import"./separator-DkzMCNTI.js";import"./index-LoxkdBUb.js";import"./underline-CWZfNP4d.js";import"./minus-CRizs5bO.js";const Se=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],Ce=Ne("Save",Se);function dt(){const e=ae.c(72),{post:i,categories:q}=oe().props,[a,te]=G.useState(i.title);let C;e[0]!==i.categories?(C=i.categories.map(Le),e[0]=i.categories,e[1]=C):C=e[1];const[o,se]=G.useState(C),[l,Q]=G.useState(!1);let E;e[2]===Symbol.for("react.memo_cache_sentinel")?(E={},e[2]=E):E=e[2];const[s,N]=G.useState(E);let $;e[3]===Symbol.for("react.memo_cache_sentinel")?($=[{title:"Dashboard",href:"/dashboard"},{title:"Posts",href:"/posts"},{title:"Edit Diskusi",href:"#"}],e[3]=$):$=e[3];const ie=$;let L;e[4]===Symbol.for("react.memo_cache_sentinel")?(L=me.configure({heading:{levels:[1,2,3]}}),e[4]=L):L=e[4];let M;e[5]===Symbol.for("react.memo_cache_sentinel")?(M=[L,ce,de.configure({multicolor:!1}),be.configure({types:["heading","paragraph"]}),pe.configure({openOnClick:!1,HTMLAttributes:{class:"text-[#1548d7] dark:text-[#6b93f5] underline cursor-pointer"}}),fe.configure({HTMLAttributes:{class:"rounded-lg max-w-full mx-auto my-4 shadow-sm"},allowBase64:!1}),ue.configure({placeholder:"Mulai tulis diskusi Anda di sini..."})],e[5]=M):M=e[5];let A;e[6]===Symbol.for("react.memo_cache_sentinel")?(A={attributes:{class:"prose prose-neutral dark:prose-invert max-w-none min-h-[400px] px-6 py-4 focus:outline-none text-[15px] leading-[1.8]"}},e[6]=A):A=e[6];let T;e[7]!==i.content?(T={extensions:M,content:i.content,editorProps:A},e[7]=i.content,e[8]=T):T=e[8];const r=xe(T);let H;e[9]!==r||e[10]!==i.id||e[11]!==o||e[12]!==a?(H=()=>{if(!r)return;const n=r.getHTML(),S={};if(a.trim()||(S.title="Judul wajib diisi."),o.length===0&&(S.categories="Minimal satu kategori wajib diisi."),(!n||n==="<p></p>")&&(S.content="Konten wajib diisi."),Object.keys(S).length>0){N(S);return}N({}),Q(!0),le.put(`/posts/${i.id}`,{title:a.trim(),categories:o,content:n},{onError:re=>{N(re),Q(!1)},onFinish:()=>Q(!1)})},e[9]=r,e[10]=i.id,e[11]=o,e[12]=a,e[13]=H):H=e[13];const U=H;let P;e[14]===Symbol.for("react.memo_cache_sentinel")?(P=t.jsx(ne,{title:"Edit Diskusi"}),e[14]=P):P=e[14];let D,I,z,B;e[15]===Symbol.for("react.memo_cache_sentinel")?(B=t.jsx("div",{className:"pointer-events-none absolute inset-0 bg-[linear-gradient(to_right,#80808012_1px,transparent_1px),linear-gradient(to_bottom,#80808012_1px,transparent_1px)] bg-size-[24px_24px]"}),D=t.jsx("div",{className:"absolute -top-24 -left-24 h-64 w-64 bg-[#1548d7]/10 dark:bg-[#6b93f5]/10 rounded-full blur-3xl pointer-events-none"}),I=t.jsx("div",{className:"absolute top-1/2 right-0 -translate-y-1/2 h-48 w-48 bg-indigo-500/10 dark:bg-indigo-400/10 rounded-full blur-3xl pointer-events-none"}),z=t.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-px bg-linear-to-r from-transparent via-[#1548d7]/20 dark:via-[#6b93f5]/20 to-transparent"}),e[15]=D,e[16]=I,e[17]=z,e[18]=B):(D=e[15],I=e[16],z=e[17],B=e[18]);const W=`/posts/${i.id}`;let J;e[19]===Symbol.for("react.memo_cache_sentinel")?(J=t.jsx(ye,{className:"mr-1.5 h-4 w-4"}),e[19]=J):J=e[19];let m;e[20]!==W?(m=t.jsx(Z,{variant:"ghost",size:"sm",className:"mb-6 text-muted-foreground hover:text-foreground -ml-3 transition-colors",asChild:!0,children:t.jsxs("a",{href:W,children:[J,"Kembali ke Diskusi"]})}),e[20]=W,e[21]=m):m=e[21];let K,O;e[22]===Symbol.for("react.memo_cache_sentinel")?(K=t.jsxs("h1",{className:"text-2xl md:text-3xl font-bold text-foreground tracking-tight flex items-center gap-3",children:[t.jsx("span",{className:"h-2 w-2 rounded-full bg-[#1548d7] dark:bg-[#6b93f5] shadow-[0_0_10px_rgba(21,72,215,0.6)]"}),"Edit Diskusi"]}),O=t.jsx("p",{className:"text-sm text-muted-foreground mt-2 md:ml-5",children:"Perbarui konten dan detail diskusi Anda."}),e[22]=K,e[23]=O):(K=e[22],O=e[23]);let c;e[24]!==m?(c=t.jsxs("div",{className:"relative overflow-hidden border-b border-border/40 bg-background/80 backdrop-blur-lg",children:[B,D,I,z,t.jsxs("div",{className:"relative mx-auto w-full max-w-4xl px-4 md:px-6 pt-6 md:pt-8 pb-6",children:[m,K,O]})]}),e[24]=m,e[25]=c):c=e[25];let d;e[26]!==s.title?(d=n=>{te(n.target.value),s.title&&N($e)},e[26]=s.title,e[27]=d):d=e[27];const X=`text-xl md:text-2xl font-bold placeholder:text-muted-foreground/40 h-auto py-3 px-4 bg-background ${s.title?"ring-1 ring-destructive border-destructive":""}`;let p;e[28]!==d||e[29]!==X||e[30]!==a?(p=t.jsx(he,{placeholder:"Judul diskusi...",value:a,onChange:d,className:X}),e[28]=d,e[29]=X,e[30]=a,e[31]=p):p=e[31];let f;e[32]!==s.title?(f=s.title&&t.jsx("p",{className:"text-xs text-destructive mt-1",children:s.title}),e[32]=s.title,e[33]=f):f=e[33];let u;e[34]!==p||e[35]!==f?(u=t.jsxs("div",{children:[p,f]}),e[34]=p,e[35]=f,e[36]=u):u=e[36];let x;e[37]!==s.categories?(x=n=>{se(n),s.categories&&N(Ee)},e[37]=s.categories,e[38]=x):x=e[38];let g;e[39]!==q||e[40]!==s.categories||e[41]!==o||e[42]!==x?(g=t.jsx("div",{children:t.jsx(je,{value:o,onChange:x,suggestions:q,error:s.categories})}),e[39]=q,e[40]=s.categories,e[41]=o,e[42]=x,e[43]=g):g=e[43];let b;e[44]!==u||e[45]!==g?(b=t.jsxs(ee,{className:"p-5 md:p-6 space-y-4",children:[u,g]}),e[44]=u,e[45]=g,e[46]=b):b=e[46];let h,_;e[47]!==r?(h=t.jsx(ve,{editor:r}),_=t.jsx(ge,{editor:r}),e[47]=r,e[48]=h,e[49]=_):(h=e[48],_=e[49]);let j;e[50]!==s.content?(j=s.content&&t.jsx("div",{className:"px-5 pb-3",children:t.jsx("p",{className:"text-xs text-destructive",children:s.content})}),e[50]=s.content,e[51]=j):j=e[51];let R;e[52]===Symbol.for("react.memo_cache_sentinel")?(R=t.jsx("p",{className:"text-xs text-muted-foreground",children:"Tips: Gunakan toolbar di atas untuk memformat teks, menambahkan gambar, link, dan lainnya."}),e[52]=R):R=e[52];let v;e[53]!==l?(v=l?t.jsx(we,{className:"mr-2 h-4 w-4 animate-spin"}):t.jsx(Ce,{className:"mr-2 h-4 w-4"}),e[53]=l,e[54]=v):v=e[54];const Y=l?"Menyimpan...":"Simpan Perubahan";let k;e[55]!==U||e[56]!==l||e[57]!==v||e[58]!==Y?(k=t.jsxs(ee,{className:"p-4 flex items-center justify-between",children:[R,t.jsxs(Z,{className:"bg-[#1548d7] hover:bg-[#1237b0] text-white shadow-md",onClick:U,disabled:l,children:[v,Y]})]}),e[55]=U,e[56]=l,e[57]=v,e[58]=Y,e[59]=k):k=e[59];let y;e[60]!==b||e[61]!==h||e[62]!==_||e[63]!==j||e[64]!==k?(y=t.jsxs("div",{className:"mx-auto w-full max-w-4xl px-4 md:px-6 py-6 flex flex-col gap-5",children:[b,h,_,j,k]}),e[60]=b,e[61]=h,e[62]=_,e[63]=j,e[64]=k,e[65]=y):y=e[65];let w;e[66]!==c||e[67]!==y?(w=t.jsxs("div",{className:"flex flex-col gap-0",children:[c,y]}),e[66]=c,e[67]=y,e[68]=w):w=e[68];let V;e[69]===Symbol.for("react.memo_cache_sentinel")?(V=t.jsx(ke,{}),e[69]=V):V=e[69];let F;return e[70]!==w?(F=t.jsxs(_e,{breadcrumbs:ie,children:[P,w,V]}),e[70]=w,e[71]=F):F=e[71],F}function Ee(e){return{...e,categories:""}}function $e(e){return{...e,title:""}}function Le(e){return e.name.toLowerCase()}export{dt as default};

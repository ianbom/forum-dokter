import{c as xe,r as O,j as s,a as ne}from"./app-DxNMPl-L.js";import{i as ue,b as he,c as ge,d as be,e as je,u as ve,a as Ne,E as oe}from"./index-BJ-u6s7V.js";import{a as ke,b as _e,A as we}from"./avatar-DDn6NSDq.js";import{B as ye}from"./badge-BRUm1n93.js";import{B as P}from"./button-DKrVNIHD.js";import{AttachmentCard as $e}from"./AttachmentCard-BCVr9Yev.js";import{CommentEditorToolbar as de}from"./CommentEditorToolbar-C9QKUF2n.js";import{L as me}from"./loader-circle-Bc_kWYts.js";import{P as Se}from"./pencil-DNlvVDVR.js";import{c as ie}from"./utils-CwW6CK2s.js";import{S as Ce}from"./send-DVACjajf.js";const Ee=[["polyline",{points:"15 10 20 15 15 20",key:"1q7qjw"}],["path",{d:"M4 4v7a4 4 0 0 0 4 4h12",key:"z08zvw"}]],Le=ie("CornerDownRight",Ee);const ze=[["polyline",{points:"9 17 4 12 9 7",key:"hvgpf2"}],["path",{d:"M20 18v-2a4 4 0 0 0-4-4H4",key:"5vmcpk"}]],Te=ie("Reply",ze);const Be=[["path",{d:"M7 10v12",key:"1qc93n"}],["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2a3.13 3.13 0 0 1 3 3.88Z",key:"emmmcr"}]],Re=ie("ThumbsUp",Be);function ce(l){const e=xe.c(11);let t;e[0]===Symbol.for("react.memo_cache_sentinel")?(t=ue.configure({heading:{levels:[2,3]}}),e[0]=t):t=e[0];let r,p,x;e[1]===Symbol.for("react.memo_cache_sentinel")?(r=he.configure({multicolor:!1}),p=ge.configure({openOnClick:!1,HTMLAttributes:{class:"text-[#1548d7] dark:text-[#6b93f5] underline cursor-pointer"}}),x=be.configure({HTMLAttributes:{class:"rounded-lg max-w-full mx-auto my-3 shadow-sm"},allowBase64:!1}),e[1]=r,e[2]=p,e[3]=x):(r=e[1],p=e[2],x=e[3]);let a;e[4]!==l?(a=je.configure({placeholder:l}),e[4]=l,e[5]=a):a=e[5];let d;e[6]!==a?(d=[t,Ne,r,p,x,a],e[6]=a,e[7]=d):d=e[7];let f;e[8]===Symbol.for("react.memo_cache_sentinel")?(f={attributes:{class:"prose prose-sm prose-neutral dark:prose-invert max-w-none min-h-[100px] px-4 py-3 focus:outline-none text-sm leading-relaxed"}},e[8]=f):f=e[8];let u;return e[9]!==d?(u={extensions:d,editorProps:f},e[9]=d,e[10]=u):u=e[10],ve(u)}const i={bg:"bg-[#1548d7]",bgHover:"hover:bg-[#1237b0]",text:"text-[#1548d7]",bgLight:"bg-[#1548d7]/10",darkText:"dark:text-[#6b93f5]",darkBgLight:"dark:bg-[#1548d7]/20"};function He(l){return l.split(" ").filter((e,t)=>t<2).map(e=>e[0]).join("").toUpperCase()}function Me(l){return new Date(l).toLocaleDateString("id-ID",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"})}function fe(l){const e=xe.c(88),{comment:t,postId:r,depth:p}=l,x=p===void 0?0:p,[a,d]=O.useState(!1),[f,u]=O.useState(!1),[J,le]=O.useState(!1),[q,re]=O.useState(!1),[,De]=O.useState(!1),[h,pe]=O.useState(!1),n=x>0;let F;e[0]!==t.user.name?(F=He(t.user.name),e[0]=t.user.name,e[1]=F):F=e[1];const Q=F,m=ce(`Balas ${t.user.name}...`),o=ce("Edit komentar...");let U;e[2]!==t.id||e[3]!==r||e[4]!==m?(U=()=>{if(!m)return;const c=m.getHTML();!c||c==="<p></p>"||(u(!0),ne.post("/comments",{post_id:r,parent_id:t.id,content:c},{preserveScroll:!0,onSuccess:()=>{m.commands.clearContent(),d(!1)},onFinish:()=>u(!1)}))},e[2]=t.id,e[3]=r,e[4]=m,e[5]=U):U=e[5];const V=U;let K;e[6]!==o?.commands?(K=()=>{le(!1),o?.commands.clearContent()},e[6]=o?.commands,e[7]=K):K=e[7];const W=K;let Z;e[8]!==t.id||e[9]!==o?(Z=()=>{if(!o)return;const c=o.getHTML();!c||c==="<p></p>"||(re(!0),ne.put(`/comments/${t.id}`,{content:c},{preserveScroll:!0,onSuccess:()=>le(!1),onFinish:()=>re(!1)}))},e[8]=t.id,e[9]=o,e[10]=Z):Z=e[10];const X=Z,Y=n?"ml-5 md:ml-8":"";let g;e[11]!==n?(g=n&&s.jsx("div",{className:"absolute -left-5 md:-left-8 top-0 bottom-0 w-px bg-border dark:bg-border/50"}),e[11]=n,e[12]=g):g=e[12];let b;e[13]!==n?(b=n&&s.jsx("div",{className:"absolute -left-5 md:-left-8 top-9 h-px w-4 md:w-7 bg-border dark:bg-border/50"}),e[13]=n,e[14]=b):b=e[14];const ee=`${n?"h-8 w-8":"h-10 w-10"} shrink-0 ring-2 ring-background shadow-sm`;let j;e[15]!==t.user.name||e[16]!==t.user.profile_photo?(j=t.user.profile_photo&&s.jsx(ke,{src:`/storage/${t.user.profile_photo}`,alt:t.user.name,className:"object-cover"}),e[15]=t.user.name,e[16]=t.user.profile_photo,e[17]=j):j=e[17];let v;e[18]!==Q?(v=s.jsx(_e,{className:`${i.bg} text-white text-xs font-semibold`,children:Q}),e[18]=Q,e[19]=v):v=e[19];let N;e[20]!==j||e[21]!==v||e[22]!==ee?(N=s.jsxs(we,{className:ee,children:[j,v]}),e[20]=j,e[21]=v,e[22]=ee,e[23]=N):N=e[23];let k;e[24]!==t.user.name?(k=s.jsx("span",{className:`text-sm font-semibold ${i.text} ${i.darkText}`,children:t.user.name}),e[24]=t.user.name,e[25]=k):k=e[25];let _;e[26]!==t.user.specialization?(_=t.user.specialization&&s.jsx(ye,{className:`${i.bgLight} ${i.text} ${i.darkBgLight} ${i.darkText} border-0 text-[10px] font-medium px-1.5 py-0`,children:t.user.specialization}),e[26]=t.user.specialization,e[27]=_):_=e[27];let w;e[28]!==t.created_at?(w=Me(t.created_at),e[28]=t.created_at,e[29]=w):w=e[29];let y;e[30]!==w?(y=s.jsx("span",{className:"text-[11px] text-muted-foreground",children:w}),e[30]=w,e[31]=y):y=e[31];let $;e[32]!==k||e[33]!==_||e[34]!==y?($=s.jsx("div",{className:"flex items-center justify-between gap-2 mb-1.5",children:s.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[k,_,y]})}),e[32]=k,e[33]=_,e[34]=y,e[35]=$):$=e[35];let S;e[36]!==t.content||e[37]!==o||e[38]!==J||e[39]!==W||e[40]!==X||e[41]!==q?(S=J?s.jsxs("div",{className:"mt-2 space-y-2",children:[s.jsxs("div",{className:"rounded-xl border bg-card shadow-sm overflow-hidden",children:[s.jsx(de,{editor:o}),s.jsx(oe,{editor:o})]}),s.jsxs("div",{className:"flex items-center justify-end gap-1.5",children:[s.jsx(P,{variant:"ghost",size:"sm",className:"h-7 text-xs",onClick:W,children:"Batal"}),s.jsxs(P,{size:"sm",className:`h-7 text-xs ${i.bg} ${i.bgHover} text-white`,onClick:X,disabled:q,children:[q?s.jsx(me,{className:"mr-1 h-3 w-3 animate-spin"}):s.jsx(Se,{className:"mr-1 h-3 w-3"}),"Simpan"]})]})]}):s.jsx("div",{className:"prose prose-sm prose-neutral dark:prose-invert max-w-none text-sm leading-relaxed text-foreground/85",dangerouslySetInnerHTML:{__html:t.content}}),e[36]=t.content,e[37]=o,e[38]=J,e[39]=W,e[40]=X,e[41]=q,e[42]=S):S=e[42];let C;e[43]!==t.attachments?(C=t.attachments?.length>0&&s.jsx("div",{className:"mt-3 grid gap-2 sm:grid-cols-2",children:t.attachments.map(Ae)}),e[43]=t.attachments,e[44]=C):C=e[44];let E;e[45]!==$||e[46]!==S||e[47]!==C?(E=s.jsxs("div",{className:"rounded-2xl rounded-tl-sm bg-muted/50 dark:bg-muted/30 px-4 py-3 transition-colors hover:bg-muted/70 dark:hover:bg-muted/40",children:[$,S,C]}),e[45]=$,e[46]=S,e[47]=C,e[48]=E):E=e[48];const te=`h-7 px-2 text-xs gap-1 ${h?`${i.text} ${i.darkText}`:"text-muted-foreground"}`;let L;e[49]!==h?(L=()=>pe(!h),e[49]=h,e[50]=L):L=e[50];const se=`h-3.5 w-3.5 ${h?"fill-current":""}`;let z;e[51]!==se?(z=s.jsx(Re,{className:se}),e[51]=se,e[52]=z):z=e[52];const ae=h?1:0;let T;e[53]!==te||e[54]!==L||e[55]!==z||e[56]!==ae?(T=s.jsxs(P,{variant:"ghost",size:"sm",className:te,onClick:L,children:[z,ae]}),e[53]=te,e[54]=L,e[55]=z,e[56]=ae,e[57]=T):T=e[57];let B;e[58]!==n||e[59]!==a?(B=!n&&s.jsxs(P,{variant:"ghost",size:"sm",className:"h-7 px-2 text-xs text-muted-foreground gap-1",onClick:()=>d(!a),children:[s.jsx(Te,{className:"h-3.5 w-3.5"}),"Balas"]}),e[58]=n,e[59]=a,e[60]=B):B=e[60];let R;e[61]!==T||e[62]!==B?(R=s.jsxs("div",{className:"mt-1.5 flex items-center gap-0.5 px-1",children:[T,B]}),e[61]=T,e[62]=B,e[63]=R):R=e[63];let H;e[64]!==V||e[65]!==m||e[66]!==a||e[67]!==f?(H=a&&s.jsxs("div",{className:"mt-2 ml-1 flex gap-2.5 items-start",children:[s.jsx(Le,{className:"mt-3 h-4 w-4 text-muted-foreground shrink-0"}),s.jsxs("div",{className:"flex-1 space-y-2",children:[s.jsxs("div",{className:"rounded-xl border bg-card shadow-sm overflow-hidden",children:[s.jsx(de,{editor:m}),s.jsx(oe,{editor:m})]}),s.jsxs("div",{className:"flex items-center justify-end gap-1.5",children:[s.jsx(P,{variant:"ghost",size:"sm",className:"h-7 text-xs",onClick:()=>{d(!1),m?.commands.clearContent()},children:"Batal"}),s.jsxs(P,{size:"sm",className:`h-7 text-xs ${i.bg} ${i.bgHover} text-white`,onClick:V,disabled:f,children:[f?s.jsx(me,{className:"mr-1 h-3 w-3 animate-spin"}):s.jsx(Ce,{className:"mr-1 h-3 w-3"}),"Kirim"]})]})]})]}),e[64]=V,e[65]=m,e[66]=a,e[67]=f,e[68]=H):H=e[68];let M;e[69]!==E||e[70]!==R||e[71]!==H?(M=s.jsxs("div",{className:"flex-1 min-w-0",children:[E,R,H]}),e[69]=E,e[70]=R,e[71]=H,e[72]=M):M=e[72];let A;e[73]!==N||e[74]!==M?(A=s.jsxs("div",{className:"flex gap-3",children:[N,M]}),e[73]=N,e[74]=M,e[75]=A):A=e[75];let D;e[76]!==A||e[77]!==g||e[78]!==b?(D=s.jsxs("div",{className:"group relative py-5",children:[g,b,A]}),e[76]=A,e[77]=g,e[78]=b,e[79]=D):D=e[79];let I;e[80]!==t.replies||e[81]!==x||e[82]!==r?(I=t.replies?.map(c=>s.jsx(fe,{comment:c,postId:r,depth:x+1},c.id)),e[80]=t.replies,e[81]=x,e[82]=r,e[83]=I):I=e[83];let G;return e[84]!==D||e[85]!==I||e[86]!==Y?(G=s.jsxs("div",{className:Y,children:[D,I]}),e[84]=D,e[85]=I,e[86]=Y,e[87]=G):G=e[87],G}function Ae(l){return s.jsx($e,{attachment:l},l.id)}const Ve=Object.freeze(Object.defineProperty({__proto__:null,CommentItem:fe},Symbol.toStringTag,{value:"Module"}));export{fe as C,Ve as a,ce as u};

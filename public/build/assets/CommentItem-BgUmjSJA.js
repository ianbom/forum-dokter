import{c as Ce,r as U,j as t,a as be}from"./app-BzdYNmvy.js";import{a as Me,A as De}from"./avatar-BePvH8QK.js";import{B as Le}from"./badge-ImFDheKo.js";import{B as h}from"./button-EjGxs5Lm.js";import{D as ze,a as we,b as Be,c as He,d as Re}from"./dropdown-menu-DRBABP5s.js";import{i as Ae,b as Ie,c as Oe,d as Fe,e as Pe,u as qe,a as Ue,E as ke}from"./index-CoSAoSqH.js";import{AttachmentCard as Ke}from"./AttachmentCard-CdlMRiMm.js";import{CommentEditorToolbar as ye}from"./CommentEditorToolbar-D39D78cw.js";import{L as _e}from"./loader-circle-B7kMoOIo.js";import{P as Se,T as Ze}from"./trash-2-dxIp3EWr.js";import{E as Ge}from"./ellipsis-O7dbhgx1.js";import{c as je}from"./utils-C9NPyLOx.js";import{S as Je}from"./send-CecksZqM.js";const Qe=[["polyline",{points:"15 10 20 15 15 20",key:"1q7qjw"}],["path",{d:"M4 4v7a4 4 0 0 0 4 4h12",key:"z08zvw"}]],Ve=je("CornerDownRight",Qe);const We=[["polyline",{points:"9 17 4 12 9 7",key:"hvgpf2"}],["path",{d:"M20 18v-2a4 4 0 0 0-4-4H4",key:"5vmcpk"}]],Xe=je("Reply",We);const Ye=[["path",{d:"M7 10v12",key:"1qc93n"}],["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2a3.13 3.13 0 0 1 3 3.88Z",key:"emmmcr"}]],et=je("ThumbsUp",Ye);function $e(l){const e=Ce.c(11);let s;e[0]===Symbol.for("react.memo_cache_sentinel")?(s=Ae.configure({heading:{levels:[2,3]}}),e[0]=s):s=e[0];let r,p,f;e[1]===Symbol.for("react.memo_cache_sentinel")?(r=Ie.configure({multicolor:!1}),p=Oe.configure({openOnClick:!1,HTMLAttributes:{class:"text-[#1548d7] dark:text-[#6b93f5] underline cursor-pointer"}}),f=Fe.configure({HTMLAttributes:{class:"rounded-lg max-w-full mx-auto my-3 shadow-sm"},allowBase64:!1}),e[1]=r,e[2]=p,e[3]=f):(r=e[1],p=e[2],f=e[3]);let i;e[4]!==l?(i=Pe.configure({placeholder:l}),e[4]=l,e[5]=i):i=e[5];let c;e[6]!==i?(c=[s,Ue,r,p,f,i],e[6]=i,e[7]=c):c=e[7];let x;e[8]===Symbol.for("react.memo_cache_sentinel")?(x={attributes:{class:"prose prose-sm prose-neutral dark:prose-invert max-w-none min-h-[100px] px-4 py-3 focus:outline-none text-sm leading-relaxed"}},e[8]=x):x=e[8];let u;return e[9]!==c?(u={extensions:c,editorProps:x},e[9]=c,e[10]=u):u=e[10],qe(u)}const n={bg:"bg-[#1548d7]",bgHover:"hover:bg-[#1237b0]",text:"text-[#1548d7]",bgLight:"bg-[#1548d7]/10",darkText:"dark:text-[#6b93f5]",darkBgLight:"dark:bg-[#1548d7]/20"};function tt(l){return l.split(" ").filter((e,s)=>s<2).map(e=>e[0]).join("").toUpperCase()}function st(l){return new Date(l).toLocaleDateString("id-ID",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"})}function Ee(l){const e=Ce.c(105),{comment:s,postId:r,depth:p}=l,f=p===void 0?0:p,[i,c]=U.useState(!1),[x,u]=U.useState(!1),[ie,ne]=U.useState(!1),[K,ve]=U.useState(!1),[Z,Ne]=U.useState(!1),[g,Te]=U.useState(!1),o=f>0;let G;e[0]!==s.user.name?(G=tt(s.user.name),e[0]=s.user.name,e[1]=G):G=e[1];const le=G,d=$e(`Balas ${s.user.name}...`),a=$e("Edit komentar...");let J;e[2]!==s.id||e[3]!==r||e[4]!==d?(J=()=>{if(!d)return;const m=d.getHTML();!m||m==="<p></p>"||(u(!0),be.post("/comments",{post_id:r,parent_id:s.id,content:m},{preserveScroll:!0,onSuccess:()=>{d.commands.clearContent(),c(!1)},onFinish:()=>u(!1)}))},e[2]=s.id,e[3]=r,e[4]=d,e[5]=J):J=e[5];const re=J;let Q;e[6]!==s.content||e[7]!==a?.commands?(Q=()=>{a?.commands.setContent(s.content),ne(!0)},e[6]=s.content,e[7]=a?.commands,e[8]=Q):Q=e[8];const oe=Q;let V;e[9]!==a?.commands?(V=()=>{ne(!1),a?.commands.clearContent()},e[9]=a?.commands,e[10]=V):V=e[10];const ce=V;let W;e[11]!==s.id||e[12]!==a?(W=()=>{if(!a)return;const m=a.getHTML();!m||m==="<p></p>"||(ve(!0),be.put(`/comments/${s.id}`,{content:m},{preserveScroll:!0,onSuccess:()=>ne(!1),onFinish:()=>ve(!1)}))},e[11]=s.id,e[12]=a,e[13]=W):W=e[13];const de=W;let X;e[14]!==s.id?(X=()=>{confirm("Apakah Anda yakin ingin menghapus komentar ini?")&&(Ne(!0),be.delete(`/comments/${s.id}`,{preserveScroll:!0,onFinish:()=>Ne(!1)}))},e[14]=s.id,e[15]=X):X=e[15];const me=X,fe=o?"ml-5 md:ml-8":"";let b;e[16]!==o?(b=o&&t.jsx("div",{className:"absolute -left-5 md:-left-8 top-0 bottom-0 w-px bg-border dark:bg-border/50"}),e[16]=o,e[17]=b):b=e[17];let j;e[18]!==o?(j=o&&t.jsx("div",{className:"absolute -left-5 md:-left-8 top-9 h-px w-4 md:w-7 bg-border dark:bg-border/50"}),e[18]=o,e[19]=j):j=e[19];const xe=`${o?"h-8 w-8":"h-10 w-10"} shrink-0 ring-2 ring-background shadow-sm`;let v;e[20]!==le?(v=t.jsx(Me,{className:`${n.bg} text-white text-xs font-semibold`,children:le}),e[20]=le,e[21]=v):v=e[21];let N;e[22]!==xe||e[23]!==v?(N=t.jsx(De,{className:xe,children:v}),e[22]=xe,e[23]=v,e[24]=N):N=e[24];let w;e[25]!==s.user.name?(w=t.jsx("span",{className:`text-sm font-semibold ${n.text} ${n.darkText}`,children:s.user.name}),e[25]=s.user.name,e[26]=w):w=e[26];let k;e[27]!==s.user.specialization?(k=s.user.specialization&&t.jsx(Le,{className:`${n.bgLight} ${n.text} ${n.darkBgLight} ${n.darkText} border-0 text-[10px] font-medium px-1.5 py-0`,children:s.user.specialization}),e[27]=s.user.specialization,e[28]=k):k=e[28];let y;e[29]!==s.created_at?(y=st(s.created_at),e[29]=s.created_at,e[30]=y):y=e[30];let _;e[31]!==y?(_=t.jsx("span",{className:"text-[11px] text-muted-foreground",children:y}),e[31]=y,e[32]=_):_=e[32];let S;e[33]!==w||e[34]!==k||e[35]!==_?(S=t.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[w,k,_]}),e[33]=w,e[34]=k,e[35]=_,e[36]=S):S=e[36];let Y;e[37]===Symbol.for("react.memo_cache_sentinel")?(Y=t.jsx(ze,{asChild:!0,children:t.jsx(h,{variant:"ghost",size:"icon",className:"h-7 w-7 shrink-0 opacity-0 group-hover:opacity-100 transition-opacity",children:t.jsx(Ge,{className:"h-3.5 w-3.5"})})}),e[37]=Y):Y=e[37];let ee;e[38]===Symbol.for("react.memo_cache_sentinel")?(ee=t.jsx(Se,{className:"mr-2 h-4 w-4"}),e[38]=ee):ee=e[38];let $;e[39]!==oe?($=t.jsxs(we,{onClick:oe,children:[ee,"Edit"]}),e[39]=oe,e[40]=$):$=e[40];let te;e[41]===Symbol.for("react.memo_cache_sentinel")?(te=t.jsx(Be,{}),e[41]=te):te=e[41];let se;e[42]===Symbol.for("react.memo_cache_sentinel")?(se=t.jsx(Ze,{className:"mr-2 h-4 w-4"}),e[42]=se):se=e[42];const pe=Z?"Menghapus...":"Hapus";let C;e[43]!==Z||e[44]!==me||e[45]!==pe?(C=t.jsxs(we,{className:"text-destructive focus:text-destructive",onClick:me,disabled:Z,children:[se,pe]}),e[43]=Z,e[44]=me,e[45]=pe,e[46]=C):C=e[46];let E;e[47]!==$||e[48]!==C?(E=t.jsxs(He,{children:[Y,t.jsxs(Re,{align:"end",className:"w-40",children:[$,te,C]})]}),e[47]=$,e[48]=C,e[49]=E):E=e[49];let T;e[50]!==S||e[51]!==E?(T=t.jsxs("div",{className:"flex items-center justify-between gap-2 mb-1.5",children:[S,E]}),e[50]=S,e[51]=E,e[52]=T):T=e[52];let M;e[53]!==s.content||e[54]!==a||e[55]!==ie||e[56]!==ce||e[57]!==de||e[58]!==K?(M=ie?t.jsxs("div",{className:"mt-2 space-y-2",children:[t.jsxs("div",{className:"rounded-xl border bg-card shadow-sm overflow-hidden",children:[t.jsx(ye,{editor:a}),t.jsx(ke,{editor:a})]}),t.jsxs("div",{className:"flex items-center justify-end gap-1.5",children:[t.jsx(h,{variant:"ghost",size:"sm",className:"h-7 text-xs",onClick:ce,children:"Batal"}),t.jsxs(h,{size:"sm",className:`h-7 text-xs ${n.bg} ${n.bgHover} text-white`,onClick:de,disabled:K,children:[K?t.jsx(_e,{className:"mr-1 h-3 w-3 animate-spin"}):t.jsx(Se,{className:"mr-1 h-3 w-3"}),"Simpan"]})]})]}):t.jsx("div",{className:"prose prose-sm prose-neutral dark:prose-invert max-w-none text-sm leading-relaxed text-foreground/85",dangerouslySetInnerHTML:{__html:s.content}}),e[53]=s.content,e[54]=a,e[55]=ie,e[56]=ce,e[57]=de,e[58]=K,e[59]=M):M=e[59];let D;e[60]!==s.attachments?(D=s.attachments?.length>0&&t.jsx("div",{className:"mt-3 grid gap-2 sm:grid-cols-2",children:s.attachments.map(at)}),e[60]=s.attachments,e[61]=D):D=e[61];let L;e[62]!==T||e[63]!==M||e[64]!==D?(L=t.jsxs("div",{className:"rounded-2xl rounded-tl-sm bg-muted/50 dark:bg-muted/30 px-4 py-3 transition-colors hover:bg-muted/70 dark:hover:bg-muted/40",children:[T,M,D]}),e[62]=T,e[63]=M,e[64]=D,e[65]=L):L=e[65];const ue=`h-7 px-2 text-xs gap-1 ${g?`${n.text} ${n.darkText}`:"text-muted-foreground"}`;let z;e[66]!==g?(z=()=>Te(!g),e[66]=g,e[67]=z):z=e[67];const he=`h-3.5 w-3.5 ${g?"fill-current":""}`;let B;e[68]!==he?(B=t.jsx(et,{className:he}),e[68]=he,e[69]=B):B=e[69];const ge=g?1:0;let H;e[70]!==ue||e[71]!==z||e[72]!==B||e[73]!==ge?(H=t.jsxs(h,{variant:"ghost",size:"sm",className:ue,onClick:z,children:[B,ge]}),e[70]=ue,e[71]=z,e[72]=B,e[73]=ge,e[74]=H):H=e[74];let R;e[75]!==o||e[76]!==i?(R=!o&&t.jsxs(h,{variant:"ghost",size:"sm",className:"h-7 px-2 text-xs text-muted-foreground gap-1",onClick:()=>c(!i),children:[t.jsx(Xe,{className:"h-3.5 w-3.5"}),"Balas"]}),e[75]=o,e[76]=i,e[77]=R):R=e[77];let A;e[78]!==H||e[79]!==R?(A=t.jsxs("div",{className:"mt-1.5 flex items-center gap-0.5 px-1",children:[H,R]}),e[78]=H,e[79]=R,e[80]=A):A=e[80];let I;e[81]!==re||e[82]!==d||e[83]!==i||e[84]!==x?(I=i&&t.jsxs("div",{className:"mt-2 ml-1 flex gap-2.5 items-start",children:[t.jsx(Ve,{className:"mt-3 h-4 w-4 text-muted-foreground shrink-0"}),t.jsxs("div",{className:"flex-1 space-y-2",children:[t.jsxs("div",{className:"rounded-xl border bg-card shadow-sm overflow-hidden",children:[t.jsx(ye,{editor:d}),t.jsx(ke,{editor:d})]}),t.jsxs("div",{className:"flex items-center justify-end gap-1.5",children:[t.jsx(h,{variant:"ghost",size:"sm",className:"h-7 text-xs",onClick:()=>{c(!1),d?.commands.clearContent()},children:"Batal"}),t.jsxs(h,{size:"sm",className:`h-7 text-xs ${n.bg} ${n.bgHover} text-white`,onClick:re,disabled:x,children:[x?t.jsx(_e,{className:"mr-1 h-3 w-3 animate-spin"}):t.jsx(Je,{className:"mr-1 h-3 w-3"}),"Kirim"]})]})]})]}),e[81]=re,e[82]=d,e[83]=i,e[84]=x,e[85]=I):I=e[85];let O;e[86]!==L||e[87]!==A||e[88]!==I?(O=t.jsxs("div",{className:"flex-1 min-w-0",children:[L,A,I]}),e[86]=L,e[87]=A,e[88]=I,e[89]=O):O=e[89];let F;e[90]!==N||e[91]!==O?(F=t.jsxs("div",{className:"flex gap-3",children:[N,O]}),e[90]=N,e[91]=O,e[92]=F):F=e[92];let P;e[93]!==j||e[94]!==F||e[95]!==b?(P=t.jsxs("div",{className:"group relative py-5",children:[b,j,F]}),e[93]=j,e[94]=F,e[95]=b,e[96]=P):P=e[96];let q;e[97]!==s.replies||e[98]!==f||e[99]!==r?(q=s.replies?.map(m=>t.jsx(Ee,{comment:m,postId:r,depth:f+1},m.id)),e[97]=s.replies,e[98]=f,e[99]=r,e[100]=q):q=e[100];let ae;return e[101]!==P||e[102]!==q||e[103]!==fe?(ae=t.jsxs("div",{className:fe,children:[P,q]}),e[101]=P,e[102]=q,e[103]=fe,e[104]=ae):ae=e[104],ae}function at(l){return t.jsx(Ke,{attachment:l},l.id)}const gt=Object.freeze(Object.defineProperty({__proto__:null,CommentItem:Ee},Symbol.toStringTag,{value:"Module"}));export{Ee as C,et as T,gt as a,$e as u};

import{c as le,u as re,r as F,j as t,a as ne,H as ce}from"./app-B-l1Xpn9.js";import{i as me,a as de,b as fe,c as ue,d as pe,e as xe,u as he,E as ge}from"./index-VkbpyBbr.js";import{i as be}from"./index-DcFVEx5N.js";import{B as ee}from"./button-DFHWZ1Xh.js";import{b as Z,C as te}from"./card-DiESreeX.js";import{I as je}from"./input-5bM_IIF8.js";import{A as we}from"./app-layout-DsGp7MiY.js";import{CategoryTagInput as _e}from"./CategoryTagInput-kmBHe48P.js";import{PostEditorToolbar as ve}from"./PostEditorToolbar-SoN80sM5.js";import{TiptapStyles as ye}from"./TiptapStyles-CDBdaYQT.js";import{A as Ne}from"./arrow-left-CZFTbl6y.js";import{L as ke}from"./loader-circle-DV_G0f_3.js";import{c as Se}from"./utils-T-nSdN8v.js";/* empty css            */import"./index-65P8ixG5.js";import"./index-C7yKKq-w.js";import"./index-D5_l5di9.js";import"./dropdown-menu-DiduwXIY.js";import"./index-BZGbaylb.js";import"./index-CaZq0GVh.js";import"./index-BlAyHWvq.js";import"./index-BoPUR0Ne.js";import"./file-text-kVZRM_6T.js";import"./plus-jJO6JJwj.js";import"./badge-BPQv1LDO.js";import"./types-aaaP6Hrz.js";import"./x-D9hAr4BO.js";import"./separator-CpVFBdWM.js";import"./index-QVf-yi77.js";import"./underline-CLm2Ic4n.js";import"./minus-b4lLzx7m.js";const Ce=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],Ee=Se("Save",Ce);function ct(){const e=le.c(73),{post:i,categories:G}=re().props,[a,se]=F.useState(i.title);let E;e[0]!==i.categories?(E=i.categories.map(Me),e[0]=i.categories,e[1]=E):E=e[1];const[l,ie]=F.useState(E),[r,q]=F.useState(!1);let $;e[2]===Symbol.for("react.memo_cache_sentinel")?($={},e[2]=$):$=e[2];const[s,S]=F.useState($);let L;e[3]===Symbol.for("react.memo_cache_sentinel")?(L=[{title:"Dashboard",href:"/dashboard"},{title:"Posts",href:"/posts"},{title:"Edit Diskusi",href:"#"}],e[3]=L):L=e[3];const oe=L;let M;e[4]===Symbol.for("react.memo_cache_sentinel")?(M=me.configure({heading:{levels:[1,2,3]}}),e[4]=M):M=e[4];let A;e[5]===Symbol.for("react.memo_cache_sentinel")?(A=[M,de,fe.configure({multicolor:!1}),be.configure({types:["heading","paragraph"]}),ue.configure({openOnClick:!1,HTMLAttributes:{class:"text-[#1548d7] dark:text-[#6b93f5] underline cursor-pointer"}}),pe.configure({HTMLAttributes:{class:"rounded-lg max-w-full mx-auto my-4 shadow-sm"},allowBase64:!1}),xe.configure({placeholder:"Mulai tulis diskusi Anda di sini..."})],e[5]=A):A=e[5];let T;e[6]===Symbol.for("react.memo_cache_sentinel")?(T={attributes:{class:"prose prose-neutral dark:prose-invert max-w-none min-h-[400px] px-6 py-4 focus:outline-none text-[15px] leading-[1.8]"}},e[6]=T):T=e[6];let H;e[7]!==i.content?(H={extensions:A,content:i.content,editorProps:T},e[7]=i.content,e[8]=H):H=e[8];const o=he(H);let P;e[9]!==o||e[10]!==i.id||e[11]!==l||e[12]!==a?(P=()=>{if(!o)return;const n=o.getHTML(),C={};if(a.trim()||(C.title="Judul wajib diisi."),l.length===0&&(C.categories="Minimal satu kategori wajib diisi."),(!n||n==="<p></p>")&&(C.content="Konten wajib diisi."),Object.keys(C).length>0){S(C);return}S({}),q(!0),ne.put(`/posts/${i.id}`,{title:a.trim(),categories:l,content:n},{onError:ae=>{S(ae),q(!1)},onFinish:()=>q(!1)})},e[9]=o,e[10]=i.id,e[11]=l,e[12]=a,e[13]=P):P=e[13];const Q=P;let D;e[14]===Symbol.for("react.memo_cache_sentinel")?(D=t.jsx(ce,{title:"Edit Diskusi"}),e[14]=D):D=e[14];let I,B;e[15]===Symbol.for("react.memo_cache_sentinel")?(B=t.jsx("div",{className:"absolute -top-20 -right-20 h-56 w-56 rounded-full bg-white/5"}),I=t.jsx("div",{className:"absolute -bottom-12 -left-12 h-40 w-40 rounded-full bg-white/5"}),e[15]=I,e[16]=B):(I=e[15],B=e[16]);const U=`/posts/${i.id}`;let z;e[17]===Symbol.for("react.memo_cache_sentinel")?(z=t.jsx(Ne,{className:"mr-1.5 h-4 w-4"}),e[17]=z):z=e[17];let c;e[18]!==U?(c=t.jsx(ee,{variant:"ghost",size:"sm",className:"mb-4 text-white/70 hover:text-white hover:bg-white/10",asChild:!0,children:t.jsxs("a",{href:U,children:[z,"Kembali ke Diskusi"]})}),e[18]=U,e[19]=c):c=e[19];let J,K;e[20]===Symbol.for("react.memo_cache_sentinel")?(J=t.jsx("h1",{className:"text-xl md:text-2xl font-bold text-white",children:"Edit Diskusi"}),K=t.jsx("p",{className:"text-sm text-white/60 mt-1",children:"Perbarui konten diskusi Anda"}),e[20]=J,e[21]=K):(J=e[20],K=e[21]);let m;e[22]!==c?(m=t.jsxs("div",{className:"relative overflow-hidden bg-linear-to-br from-[#1548d7] via-[#1d5aef] to-[#3b6ef5]",children:[B,I,t.jsxs("div",{className:"relative mx-auto max-w-4xl px-4 py-6 md:px-6 md:py-8",children:[c,J,K]})]}),e[22]=c,e[23]=m):m=e[23];let d;e[24]!==s.title?(d=n=>{se(n.target.value),s.title&&S(Le)},e[24]=s.title,e[25]=d):d=e[25];const W=`border-0 bg-transparent text-xl md:text-2xl font-bold placeholder:text-muted-foreground/40 focus-visible:ring-0 shadow-none px-0 h-auto py-2 ${s.title?"ring-1 ring-destructive rounded-md px-3":""}`;let f;e[26]!==d||e[27]!==W||e[28]!==a?(f=t.jsx(je,{placeholder:"Judul diskusi...",value:a,onChange:d,className:W}),e[26]=d,e[27]=W,e[28]=a,e[29]=f):f=e[29];let u;e[30]!==s.title?(u=s.title&&t.jsx("p",{className:"text-xs text-destructive mt-1",children:s.title}),e[30]=s.title,e[31]=u):u=e[31];let p;e[32]!==f||e[33]!==u?(p=t.jsxs("div",{children:[f,u]}),e[32]=f,e[33]=u,e[34]=p):p=e[34];let x;e[35]!==s.categories?(x=n=>{ie(n),s.categories&&S($e)},e[35]=s.categories,e[36]=x):x=e[36];let h;e[37]!==G||e[38]!==s.categories||e[39]!==l||e[40]!==x?(h=t.jsx("div",{children:t.jsx(_e,{value:l,onChange:x,suggestions:G,error:s.categories})}),e[37]=G,e[38]=s.categories,e[39]=l,e[40]=x,e[41]=h):h=e[41];let g;e[42]!==p||e[43]!==h?(g=t.jsx(Z,{className:"border-0 shadow-lg overflow-hidden",children:t.jsxs(te,{className:"p-5 md:p-6 space-y-4",children:[p,h]})}),e[42]=p,e[43]=h,e[44]=g):g=e[44];const X=`border-0 shadow-lg overflow-hidden ${s.content?"ring-1 ring-destructive":""}`;let b,j;e[45]!==o?(b=t.jsx(ve,{editor:o}),j=t.jsx(ge,{editor:o}),e[45]=o,e[46]=b,e[47]=j):(b=e[46],j=e[47]);let w;e[48]!==s.content?(w=s.content&&t.jsx("div",{className:"px-5 pb-3",children:t.jsx("p",{className:"text-xs text-destructive",children:s.content})}),e[48]=s.content,e[49]=w):w=e[49];let _;e[50]!==X||e[51]!==b||e[52]!==j||e[53]!==w?(_=t.jsxs(Z,{className:X,children:[b,j,w]}),e[50]=X,e[51]=b,e[52]=j,e[53]=w,e[54]=_):_=e[54];let O;e[55]===Symbol.for("react.memo_cache_sentinel")?(O=t.jsx("p",{className:"text-xs text-muted-foreground",children:"Tips: Gunakan toolbar di atas untuk memformat teks, menambahkan gambar, link, dan lainnya."}),e[55]=O):O=e[55];let v;e[56]!==r?(v=r?t.jsx(ke,{className:"mr-2 h-4 w-4 animate-spin"}):t.jsx(Ee,{className:"mr-2 h-4 w-4"}),e[56]=r,e[57]=v):v=e[57];const Y=r?"Menyimpan...":"Simpan Perubahan";let y;e[58]!==Q||e[59]!==r||e[60]!==v||e[61]!==Y?(y=t.jsx(Z,{className:"border-0 shadow-lg",children:t.jsxs(te,{className:"p-4 flex items-center justify-between",children:[O,t.jsxs(ee,{className:"bg-[#1548d7] hover:bg-[#1237b0] text-white shadow-md",onClick:Q,disabled:r,children:[v,Y]})]})}),e[58]=Q,e[59]=r,e[60]=v,e[61]=Y,e[62]=y):y=e[62];let N;e[63]!==g||e[64]!==_||e[65]!==y?(N=t.jsxs("div",{className:"mx-auto w-full max-w-4xl px-4 md:px-6 py-6 flex flex-col gap-5",children:[g,_,y]}),e[63]=g,e[64]=_,e[65]=y,e[66]=N):N=e[66];let k;e[67]!==m||e[68]!==N?(k=t.jsxs("div",{className:"flex flex-col gap-0",children:[m,N]}),e[67]=m,e[68]=N,e[69]=k):k=e[69];let R;e[70]===Symbol.for("react.memo_cache_sentinel")?(R=t.jsx(ye,{}),e[70]=R):R=e[70];let V;return e[71]!==k?(V=t.jsxs(we,{breadcrumbs:oe,children:[D,k,R]}),e[71]=k,e[72]=V):V=e[72],V}function $e(e){return{...e,categories:""}}function Le(e){return{...e,title:""}}function Me(e){return e.name.toLowerCase()}export{ct as default};

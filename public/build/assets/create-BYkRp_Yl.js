import{c as W,u as X,r as I,j as t,a as Y,H as Z}from"./app-C-L-f7Cv.js";import{i as ee,a as te,b as se,c as ie,d as re,e as ae,u as oe,E as le}from"./index-DLcPj4J-.js";import{i as ne}from"./index-DIIjUR9G.js";import{B as G}from"./button-C6VLO9-n.js";import{C as q}from"./card-CaTQA3-E.js";import{I as me}from"./input-kfKQS2T6.js";import{A as de}from"./app-layout-DymOOUoN.js";import{CategoryTagInput as ce}from"./CategoryTagInput-_Zu-QqzQ.js";import{PostEditorToolbar as ue}from"./PostEditorToolbar-82_CvGxM.js";import{TiptapStyles as pe}from"./TiptapStyles-CcbPnpvA.js";import{A as fe}from"./arrow-left-Ctpm-IDd.js";import{L as xe}from"./loader-circle-Dldf86kZ.js";import{S as ge}from"./send-CMP3g5h_.js";import"./app-DLAxlG54.js";import"./index-O-Ox_5vd.js";import"./index-C7yKKq-w.js";import"./utils-BZan-CNl.js";import"./index-BqFw_WzI.js";import"./dropdown-menu-BdS-nXSh.js";import"./index-CyX7LRCO.js";import"./index-Cj9rIc1C.js";import"./index-DOXXiINL.js";import"./index-C-6T25Ox.js";import"./index-CzirVx36.js";import"./index-CbIikgPx.js";import"./app-logo-icon-DKoKFrJm.js";import"./file-text-DqdgOMSr.js";import"./plus-D6sgujCW.js";import"./badge-BmVfFTxy.js";import"./types-aaaP6Hrz.js";import"./x-Bt6brddw.js";import"./separator-DkzMCNTI.js";import"./index-LoxkdBUb.js";import"./underline-CWZfNP4d.js";import"./minus-CRizs5bO.js";const he=[{title:"Dashboard",href:"/dashboard"},{title:"Posts",href:"/posts"},{title:"Buat Diskusi",href:"#"}];function tt(){const e=W.c(60),{categories:z}=X().props,[r,Q]=I.useState("");let N;e[0]===Symbol.for("react.memo_cache_sentinel")?(N=[],e[0]=N):N=e[0];const[a,U]=I.useState(N),[o,J]=I.useState(!1);let y;e[1]===Symbol.for("react.memo_cache_sentinel")?(y={},e[1]=y):y=e[1];const[s,k]=I.useState(y);let S;e[2]===Symbol.for("react.memo_cache_sentinel")?(S=ee.configure({heading:{levels:[1,2,3]}}),e[2]=S):S=e[2];let C;e[3]===Symbol.for("react.memo_cache_sentinel")?(C={extensions:[S,te,se.configure({multicolor:!1}),ne.configure({types:["heading","paragraph"]}),ie.configure({openOnClick:!1,HTMLAttributes:{class:"text-[#1548d7] dark:text-[#6b93f5] underline cursor-pointer"}}),re.configure({HTMLAttributes:{class:"rounded-lg max-w-full mx-auto my-4 shadow-sm"},allowBase64:!1}),ae.configure({placeholder:"Mulai tulis diskusi Anda di sini..."})],editorProps:{attributes:{class:"prose prose-neutral dark:prose-invert max-w-none min-h-[400px] px-6 py-4 focus:outline-none text-[15px] leading-[1.8]"}}},e[3]=C):C=e[3];const i=oe(C);let E;e[4]!==i||e[5]!==a||e[6]!==r?(E=()=>{if(!i)return;const l=i.getHTML(),w={};if(r.trim()||(w.title="Judul wajib diisi."),a.length===0&&(w.categories="Minimal satu kategori wajib diisi."),(!l||l==="<p></p>")&&(w.content="Konten wajib diisi."),Object.keys(w).length>0){k(w);return}k({}),J(!0),Y.post("/posts",{title:r.trim(),categories:a,content:l},{onError:V=>{k(V),J(!1)},onFinish:()=>J(!1)})},e[4]=i,e[5]=a,e[6]=r,e[7]=E):E=e[7];const K=E;let B;e[8]===Symbol.for("react.memo_cache_sentinel")?(B=t.jsx(Z,{title:"Buat Diskusi Baru"}),e[8]=B):B=e[8];let $,A,T,L;e[9]===Symbol.for("react.memo_cache_sentinel")?($=t.jsx("div",{className:"pointer-events-none absolute inset-0 bg-[linear-gradient(to_right,#80808012_1px,transparent_1px),linear-gradient(to_bottom,#80808012_1px,transparent_1px)] bg-size-[24px_24px]"}),A=t.jsx("div",{className:"absolute -top-24 -left-24 h-64 w-64 bg-[#1548d7]/10 dark:bg-[#6b93f5]/10 rounded-full blur-3xl pointer-events-none"}),T=t.jsx("div",{className:"absolute top-1/2 right-0 -translate-y-1/2 h-48 w-48 bg-indigo-500/10 dark:bg-indigo-400/10 rounded-full blur-3xl pointer-events-none"}),L=t.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-px bg-linear-to-r from-transparent via-[#1548d7]/20 dark:via-[#6b93f5]/20 to-transparent"}),e[9]=$,e[10]=A,e[11]=T,e[12]=L):($=e[9],A=e[10],T=e[11],L=e[12]);let M;e[13]===Symbol.for("react.memo_cache_sentinel")?(M=t.jsxs("div",{className:"relative overflow-hidden border-b border-border/40 bg-background/80 backdrop-blur-lg",children:[$,A,T,L,t.jsxs("div",{className:"relative mx-auto w-full max-w-4xl px-4 md:px-6 pt-6 md:pt-8 pb-6",children:[t.jsx(G,{variant:"ghost",size:"sm",className:"mb-6 text-muted-foreground hover:text-foreground -ml-3 transition-colors",asChild:!0,children:t.jsxs("a",{href:"/posts",children:[t.jsx(fe,{className:"mr-1.5 h-4 w-4"}),"Kembali ke Diskusi"]})}),t.jsx("h1",{className:"text-2xl md:text-3xl font-bold text-foreground tracking-tight flex items-center gap-3",children:"Buat Diskusi Baru"}),t.jsx("p",{className:"text-sm text-muted-foreground mt-2 md:ml-5",children:"Bagikan pengetahuan dan pengalaman klinis Anda dengan rekan sejawat."})]})]}),e[13]=M):M=e[13];let n;e[14]!==s.title?(n=l=>{Q(l.target.value),s.title&&k(je)},e[14]=s.title,e[15]=n):n=e[15];const O=`text-xl md:text-2xl font-bold placeholder:text-muted-foreground/40 h-auto py-3 px-4 bg-background ${s.title?"ring-1 ring-destructive border-destructive":""}`;let m;e[16]!==n||e[17]!==O||e[18]!==r?(m=t.jsx(me,{placeholder:"Judul diskusi...",value:r,onChange:n,className:O}),e[16]=n,e[17]=O,e[18]=r,e[19]=m):m=e[19];let d;e[20]!==s.title?(d=s.title&&t.jsx("p",{className:"text-xs text-destructive mt-1",children:s.title}),e[20]=s.title,e[21]=d):d=e[21];let c;e[22]!==m||e[23]!==d?(c=t.jsxs("div",{children:[m,d]}),e[22]=m,e[23]=d,e[24]=c):c=e[24];let u;e[25]!==s.categories?(u=l=>{U(l),s.categories&&k(be)},e[25]=s.categories,e[26]=u):u=e[26];let p;e[27]!==z||e[28]!==s.categories||e[29]!==a||e[30]!==u?(p=t.jsx("div",{children:t.jsx(ce,{value:a,onChange:u,suggestions:z,error:s.categories})}),e[27]=z,e[28]=s.categories,e[29]=a,e[30]=u,e[31]=p):p=e[31];let f;e[32]!==c||e[33]!==p?(f=t.jsxs(q,{className:"p-5 md:p-6 space-y-4",children:[c,p]}),e[32]=c,e[33]=p,e[34]=f):f=e[34];const R=`border-1 shadow-sm overflow-hidden ${s.content?"ring-1 ring-destructive":""}`;let x,g;e[35]!==i?(x=t.jsx(ue,{editor:i}),g=t.jsx(le,{editor:i}),e[35]=i,e[36]=x,e[37]=g):(x=e[36],g=e[37]);let h;e[38]!==s.content?(h=s.content&&t.jsx("div",{className:"px-5 pb-3",children:t.jsx("p",{className:"text-xs text-destructive",children:s.content})}),e[38]=s.content,e[39]=h):h=e[39];let b;e[40]!==R||e[41]!==x||e[42]!==g||e[43]!==h?(b=t.jsxs("div",{className:R,children:[x,g,h]}),e[40]=R,e[41]=x,e[42]=g,e[43]=h,e[44]=b):b=e[44];let P;e[45]===Symbol.for("react.memo_cache_sentinel")?(P=t.jsx("p",{className:"text-xs text-muted-foreground",children:"Tips: Gunakan toolbar di atas untuk memformat teks, menambahkan gambar, link, dan lainnya."}),e[45]=P):P=e[45];let j;e[46]!==o?(j=o?t.jsx(xe,{className:"mr-2 h-4 w-4 animate-spin"}):t.jsx(ge,{className:"mr-2 h-4 w-4"}),e[46]=o,e[47]=j):j=e[47];const F=o?"Mengirim...":"Publikasikan";let _;e[48]!==K||e[49]!==o||e[50]!==j||e[51]!==F?(_=t.jsxs(q,{className:"p-4 flex items-center justify-between",children:[P,t.jsxs(G,{className:"bg-[#1548d7] hover:bg-[#1237b0] text-white shadow-md",onClick:K,disabled:o,children:[j,F]})]}),e[48]=K,e[49]=o,e[50]=j,e[51]=F,e[52]=_):_=e[52];let v;e[53]!==f||e[54]!==b||e[55]!==_?(v=t.jsxs("div",{className:"flex flex-col gap-0",children:[M,t.jsxs("div",{className:"mx-auto w-full max-w-4xl px-4 md:px-6 py-6 flex flex-col gap-5",children:[f,b,_]})]}),e[53]=f,e[54]=b,e[55]=_,e[56]=v):v=e[56];let D;e[57]===Symbol.for("react.memo_cache_sentinel")?(D=t.jsx(pe,{}),e[57]=D):D=e[57];let H;return e[58]!==v?(H=t.jsxs(de,{breadcrumbs:he,children:[B,v,D]}),e[58]=v,e[59]=H):H=e[59],H}function be(e){return{...e,categories:""}}function je(e){return{...e,title:""}}export{tt as default};

import{r as i,j as d,c as S}from"./app-WXZgWYjV.js";import{u as y}from"./index-DdfQ9YmA.js";import{u as g}from"./index-CWeWZqRk.js";import{P as A}from"./index-BGmK8S2G.js";import{s as $}from"./index-D0MbiWCm.js";import{a as L}from"./utils-Bc5G1Fwi.js";function P(a,e=[]){let r=[];function s(t,c){const o=i.createContext(c);o.displayName=t+"Context";const u=r.length;r=[...r,c];const l=f=>{const{scope:v,children:x,...p}=f,I=v?.[a]?.[u]||o,R=i.useMemo(()=>p,Object.values(p));return d.jsx(I.Provider,{value:R,children:x})};l.displayName=t+"Provider";function m(f,v){const x=v?.[a]?.[u]||o,p=i.useContext(x);if(p)return p;if(c!==void 0)return c;throw new Error(`\`${f}\` must be used within \`${t}\``)}return[l,m]}const n=()=>{const t=r.map(c=>i.createContext(c));return function(o){const u=o?.[a]||t;return i.useMemo(()=>({[`__scope${a}`]:{...o,[a]:u}}),[o,u])}};return n.scopeName=a,[s,k(n,...e)]}function k(...a){const e=a[0];if(a.length===1)return e;const r=()=>{const s=a.map(n=>({useScope:n(),scopeName:n.scopeName}));return function(t){const c=s.reduce((o,{useScope:u,scopeName:l})=>{const f=u(t)[`__scope${l}`];return{...o,...f}},{});return i.useMemo(()=>({[`__scope${e.scopeName}`]:c}),[c])}};return r.scopeName=e.scopeName,r}function M(){return $.useSyncExternalStore(F,()=>!0,()=>!1)}function F(){return()=>{}}var C="Avatar",[z]=P(C),[H,E]=z(C),_=i.forwardRef((a,e)=>{const{__scopeAvatar:r,...s}=a,[n,t]=i.useState("idle");return d.jsx(H,{scope:r,imageLoadingStatus:n,onImageLoadingStatusChange:t,children:d.jsx(A.span,{...s,ref:e})})});_.displayName=C;var b="AvatarImage",w=i.forwardRef((a,e)=>{const{__scopeAvatar:r,src:s,onLoadingStatusChange:n=()=>{},...t}=a,c=E(b,r),o=T(s,t),u=y(l=>{n(l),c.onImageLoadingStatusChange(l)});return g(()=>{o!=="idle"&&u(o)},[o,u]),o==="loaded"?d.jsx(A.img,{...t,ref:e,src:s}):null});w.displayName=b;var N="AvatarFallback",j=i.forwardRef((a,e)=>{const{__scopeAvatar:r,delayMs:s,...n}=a,t=E(N,r),[c,o]=i.useState(s===void 0);return i.useEffect(()=>{if(s!==void 0){const u=window.setTimeout(()=>o(!0),s);return()=>window.clearTimeout(u)}},[s]),c&&t.imageLoadingStatus!=="loaded"?d.jsx(A.span,{...n,ref:e}):null});j.displayName=N;function h(a,e){return a?e?(a.src!==e&&(a.src=e),a.complete&&a.naturalWidth>0?"loaded":"loading"):"error":"idle"}function T(a,{referrerPolicy:e,crossOrigin:r}){const s=M(),n=i.useRef(null),t=s?(n.current||(n.current=new window.Image),n.current):null,[c,o]=i.useState(()=>h(t,a));return g(()=>{o(h(t,a))},[t,a]),g(()=>{const u=f=>()=>{o(f)};if(!t)return;const l=u("loaded"),m=u("error");return t.addEventListener("load",l),t.addEventListener("error",m),e&&(t.referrerPolicy=e),typeof r=="string"&&(t.crossOrigin=r),()=>{t.removeEventListener("load",l),t.removeEventListener("error",m)}},[t,r,e]),c}var B=_,q=w,G=j;function Q(a){const e=S.c(8);let r,s;e[0]!==a?({className:r,...s}=a,e[0]=a,e[1]=r,e[2]=s):(r=e[1],s=e[2]);let n;e[3]!==r?(n=L("relative flex size-8 shrink-0 overflow-hidden rounded-full",r),e[3]=r,e[4]=n):n=e[4];let t;return e[5]!==s||e[6]!==n?(t=d.jsx(B,{"data-slot":"avatar",className:n,...s}),e[5]=s,e[6]=n,e[7]=t):t=e[7],t}function U(a){const e=S.c(8);let r,s;e[0]!==a?({className:r,...s}=a,e[0]=a,e[1]=r,e[2]=s):(r=e[1],s=e[2]);let n;e[3]!==r?(n=L("aspect-square size-full",r),e[3]=r,e[4]=n):n=e[4];let t;return e[5]!==s||e[6]!==n?(t=d.jsx(q,{"data-slot":"avatar-image",className:n,...s}),e[5]=s,e[6]=n,e[7]=t):t=e[7],t}function X(a){const e=S.c(8);let r,s;e[0]!==a?({className:r,...s}=a,e[0]=a,e[1]=r,e[2]=s):(r=e[1],s=e[2]);let n;e[3]!==r?(n=L("bg-muted flex size-full items-center justify-center rounded-full",r),e[3]=r,e[4]=n):n=e[4];let t;return e[5]!==s||e[6]!==n?(t=d.jsx(G,{"data-slot":"avatar-fallback",className:n,...s}),e[5]=s,e[6]=n,e[7]=t):t=e[7],t}export{Q as A,U as a,X as b};
